<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ôî</text></svg>" />
    <title>PowerChess - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Ultimate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Common Navigation Styles -->
    <link rel="stylesheet" href="navigation.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --background: #fafafa;
            --foreground: #0a0a0a;
            --card: #ffffff;
            --card-foreground: #0a0a0a;
            --primary: #7c3aed;
            --primary-dark: #6d28d9;
            --secondary: #f1f5f9;
            --muted-foreground: #64748b;
            --border: #e2e8f0;
            --purple-100: #f3e8ff;
            --purple-200: #e9d5ff;
            --purple-500: #a855f7;
            --purple-600: #9333ea;
            --purple-700: #7e22ce;
            --indigo-500: #6366f1;
            --indigo-600: #4f46e5;
            --amber-400: #fbbf24;
            --amber-500: #f59e0b;
            --amber-600: #d97706;
            --orange-500: #f97316;
            --green-500: #22c55e;
            --green-600: #16a34a;
            --emerald-500: #10b981;
            --blue-500: #3b82f6;
            --blue-600: #2563eb;
            --cyan-500: #06b6d4;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        .dark {
            --background: #0f0f23;
            --foreground: #f8fafc;
            --card: #1e1e3f;
            --card-foreground: #f8fafc;
            --secondary: #1e293b;
            --muted-foreground: #94a3b8;
            --border: #334155;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: var(--background);
            color: var(--foreground);
            line-height: 1.5;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.875rem 1.5rem;
            border-radius: 1rem;
            font-weight: 700;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--purple-600), var(--indigo-600));
            color: #fff;
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);
            border: 2px solid transparent;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(124, 58, 237, 0.4);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before { left: 100%; }

        .btn-outline {
            background: transparent;
            color: var(--purple-600);
            border: 2px solid var(--purple-600);
        }

        .btn-outline:hover {
            background: var(--purple-600);
            color: #fff;
            transform: translateY(-2px);
        }

        /* Header Styles */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid transparent;
            background-image: linear-gradient(rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.98)),
                              linear-gradient(90deg, #7c3aed, #3b82f6, #10b981, #f59e0b);
            background-origin: border-box;
            background-clip: padding-box, border-box;
            z-index: 1000;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .dark .header {
            background: rgba(15, 15, 35, 0.98);
            background-image: linear-gradient(rgba(15, 15, 35, 0.98), rgba(15, 15, 35, 0.98)),
                              linear-gradient(90deg, #8b5cf6, #3b82f6, #10b981, #f59e0b);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 80px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #1f2937 0%, #000 100%);
            border-radius: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 215, 0, 0.3);
            border: 3px solid rgba(255, 215, 0, 0.4);
            position: relative;
            overflow: hidden;
            animation: logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% {
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 215, 0, 0.3);
            }
            50% {
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 40px rgba(255, 215, 0, 0.5);
            }
        }

        .logo::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: 
                linear-gradient(45deg, rgba(139, 92, 246, 0.05) 25%, transparent 25%),
                linear-gradient(-45deg, rgba(139, 92, 246, 0.05) 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, rgba(139, 92, 246, 0.05) 75%),
                linear-gradient(-45deg, transparent 75%, rgba(139, 92, 246, 0.05) 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            opacity: 0.2;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--purple-600), var(--indigo-600), var(--amber-500));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-text p {
            font-size: 0.875rem;
            color: var(--muted-foreground);
            margin-top: -2px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .icon-button {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 0.75rem;
            color: var(--foreground);
            transition: all 0.3s ease;
            position: relative;
            font-size: 1.25rem;
        }

        .icon-button:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .badge {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--purple-500), var(--indigo-500));
            color: white;
            border-radius: 50%;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            padding-left: 1.5rem;
            border-left: 2px solid var(--purple-200);
            background: rgba(124, 58, 237, 0.05);
            border-radius: 2rem;
        }

        .dark .user-profile {
            border-left-color: var(--gray-700);
            background: rgba(139, 92, 246, 0.1);
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--purple-500), var(--indigo-500));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 1.1rem;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .user-info h3 {
            font-size: 1rem;
            font-weight: 700;
        }

        .user-info p {
            font-size: 0.875rem;
            color: var(--muted-foreground);
        }

        .theme-toggle {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(59, 130, 246, 0.1));
            border: 2px solid var(--primary);
            border-radius: 50%;
            width: 3.5rem;
            height: 3.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--primary);
            position: relative;
            overflow: hidden;
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .theme-toggle:hover {
            transform: rotate(20deg) scale(1.1);
            box-shadow: 0 5px 20px rgba(124, 58, 237, 0.4);
        }

        .theme-toggle:hover::before {
            opacity: 1;
        }

        .theme-toggle i {
            position: relative;
            z-index: 2;
            font-size: 1.25rem;
        }

        .theme-toggle:hover i {
            color: white;
        }

        body.dark .theme-toggle {
            color: #c4b5fd;
            border-color: #c4b5fd;
        }

        body.dark .theme-toggle:hover {
            transform: rotate(20deg) scale(1.1);
            box-shadow: 0 5px 20px rgba(124, 58, 237, 0.4);
        }

        body.dark .theme-toggle:hover i {
            color: white;
        }

        .logout-btn {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--purple-600), var(--indigo-600));
            color: white;
            border: none;
            border-radius: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.3);
        }

        /* Main Content */
        .main-content {
            padding-top: 110px;
            padding-bottom: 3rem;
            min-height: 100vh;
            position: relative;
        }

        .chess-pattern-bg {
            position: fixed;
            inset: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(45deg, rgba(255, 215, 0, 0.08) 25%, transparent 25%),
                linear-gradient(-45deg, rgba(255, 215, 0, 0.08) 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, rgba(255, 215, 0, 0.08) 75%),
                linear-gradient(-45deg, transparent 75%, rgba(255, 215, 0, 0.08) 75%);
            background-size: 60px 60px;
            background-position: 0 0, 0 30px, 30px -30px, -30px 0px;
        }

        /* Welcome Card */
        .welcome-card {
            background: var(--card);
            border-radius: 2rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(124, 58, 237, 0.2);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            animation: slideInUp 0.6s ease-out;
        }

        .welcome-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, 
                rgba(124, 58, 237, 0.08), 
                rgba(99, 102, 241, 0.08), 
                rgba(245, 158, 11, 0.08));
            z-index: 0;
        }

        .welcome-content {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .welcome-left {
            flex: 1;
        }

        .welcome-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .crown-avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--purple-500), var(--indigo-500), var(--amber-500));
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .welcome-title {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--purple-600), var(--indigo-600), var(--amber-500));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .welcome-subtitle {
            color: var(--muted-foreground);
            font-size: 1.1rem;
        }

        .streak-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(249, 115, 22, 0.15));
            border-radius: 2rem;
            border: 2px solid rgba(245, 158, 11, 0.3);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.2);
        }

        .streak-emoji {
            font-size: 2rem;
            animation: pulse 2s ease-in-out infinite;
        }

        .streak-text {
            font-weight: 800;
            font-size: 1.25rem;
            color: var(--amber-600);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2.5rem;
        }

        .stat-card {
            background: var(--card);
            border-radius: 1.5rem;
            padding: 1.5rem;
            border: 2px solid rgba(124, 58, 237, 0.15);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: slideInUp 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.05), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(124, 58, 237, 0.2);
            border-color: rgba(124, 58, 237, 0.3);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
            z-index: 1;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.75rem;
            flex-shrink: 0;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .stat-icon.purple {
            background: linear-gradient(135deg, var(--purple-500), var(--indigo-500));
        }

        .stat-icon.amber {
            background: linear-gradient(135deg, var(--amber-500), var(--orange-500));
        }

        .stat-icon.green {
            background: linear-gradient(135deg, var(--green-500), var(--emerald-500));
        }

        .stat-icon.blue {
            background: linear-gradient(135deg, var(--blue-500), var(--cyan-500));
        }

        .stat-value {
            font-size: 2.25rem;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 0.25rem;
        }

        .stat-value.purple { color: var(--purple-600); }
        .stat-value.amber { color: var(--amber-600); }
        .stat-value.green { color: var(--green-600); }
        .stat-value.blue { color: var(--blue-600); }

        .stat-label {
            font-size: 0.875rem;
            color: var(--muted-foreground);
            font-weight: 600;
        }

        /* Tabs */
        .tabs-container {
            background: var(--card);
            border-radius: 2rem;
            padding: 2rem;
            border: 2px solid rgba(124, 58, 237, 0.15);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .tabs-header {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border);
            padding-bottom: 1rem;
        }

        .tab-button {
            padding: 1rem 2rem;
            background: transparent;
            border: 2px solid transparent;
            border-radius: 1rem;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--muted-foreground);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-button:hover {
            background: rgba(124, 58, 237, 0.05);
            color: var(--purple-600);
        }

        .tab-button.active {
            background: linear-gradient(135deg, var(--purple-600), var(--indigo-600));
            color: white;
            border-color: transparent;
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Course Cards */
        .course-card {
            background: var(--secondary);
            border-radius: 1.5rem;
            margin-bottom: 1.5rem;
            border: 2px solid var(--border);
            transition: all 0.4s ease;
            overflow: hidden;
        }

        .course-card:hover {
            border-color: rgba(124, 58, 237, 0.3);
            box-shadow: 0 12px 30px rgba(124, 58, 237, 0.15);
        }

        .course-header {
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .course-header:hover {
            background: rgba(124, 58, 237, 0.05);
        }

        .course-info {
            flex: 1;
        }

        .course-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .course-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--purple-500), var(--indigo-500));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
        }

        .course-description {
            color: var(--muted-foreground);
            font-size: 0.95rem;
        }

        .course-meta {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .badge-pill {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, var(--purple-500), var(--indigo-500));
            color: white;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }

        .expand-icon {
            font-size: 1.5rem;
            color: var(--muted-foreground);
            transition: transform 0.3s ease;
        }

        .course-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .course-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .course-card.expanded .course-body {
            max-height: 2000px;
        }

        .course-content {
            padding: 0 2rem 2rem;
        }

        .course-progress {
            margin-bottom: 2rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .progress-label {
            font-weight: 700;
            color: var(--foreground);
        }

        .progress-percentage {
            font-weight: 700;
            color: var(--purple-600);
        }

        .progress-bar-container {
            width: 100%;
            height: 12px;
            background: var(--border);
            border-radius: 2rem;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--purple-600), var(--indigo-600), var(--amber-500));
            border-radius: 2rem;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3);
        }

        /* Lessons List */
        .lessons-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--purple-600);
        }

        .lessons-list {
            display: grid;
            gap: 1rem;
        }

        .lesson-item {
            background: var(--card);
            padding: 1.25rem;
            border-radius: 1rem;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lesson-item:hover {
            border-color: rgba(124, 58, 237, 0.3);
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.15);
        }

        .lesson-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--blue-500), var(--cyan-500));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .lesson-info {
            flex: 1;
        }

        .lesson-title {
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .lesson-duration {
            font-size: 0.875rem;
            color: var(--muted-foreground);
        }

        .lesson-status {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 700;
        }

        .lesson-status.completed {
            background: rgba(16, 185, 129, 0.15);
            color: var(--green-600);
        }

        .lesson-status.in-progress {
            background: rgba(245, 158, 11, 0.15);
            color: var(--amber-600);
        }

        .lesson-status.locked {
            background: rgba(100, 116, 139, 0.15);
            color: var(--muted-foreground);
        }

        /* Files Section */
        .files-list {
            display: grid;
            gap: 1rem;
        }

        .file-item {
            background: var(--card);
            padding: 1.25rem;
            border-radius: 1rem;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-item:hover {
            border-color: rgba(124, 58, 237, 0.3);
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.15);
        }

        .file-icon {
            width: 48px;
            height: 48px;
            border-radius: 0.75rem;
            background: linear-gradient(135deg, var(--amber-500), var(--orange-500));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .file-meta {
            font-size: 0.875rem;
            color: var(--muted-foreground);
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
        }

        .file-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, var(--purple-600), var(--indigo-600));
            color: white;
            border: none;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .file-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(124, 58, 237, 0.3);
        }

        /* Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: var(--card);
            border-radius: 2rem;
            max-width: 1200px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            padding: 2rem;
            border-bottom: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.75rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--purple-600), var(--indigo-600), var(--amber-500));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-close {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff4757, #ff3838);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 8px 20px rgba(255, 71, 87, 0.4);
        }

        .modal-body {
            padding: 2rem;
            overflow-y: auto;
            flex: 1;
        }

        .video-container {
            width: 100%;
            aspect-ratio: 16 / 9;
            background: #000;
            border-radius: 1rem;
            overflow: hidden;
            margin-bottom: 2rem;
            position: relative;
        }

        .video-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1f2937, #111827);
            color: white;
            font-size: 4rem;
        }

        .pgn-viewer {
            background: var(--secondary);
            border-radius: 1rem;
            padding: 2rem;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.8;
            overflow-x: auto;
            border: 2px solid var(--border);
        }

        /* Animations */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .user-profile {
                display: none;
            }

            .welcome-title {
                font-size: 1.75rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .tabs-header {
                flex-wrap: wrap;
            }

            .tab-button {
                padding: 0.75rem 1.25rem;
                font-size: 0.95rem;
            }

            .course-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .modal-body {
                padding: 1rem;
            }
        }

        .nav {
             display: none;
             align-items: center;
             gap: 0.5rem;
         }

         @media (min-width: 1024px) {
             .nav { display: flex; }
         }

         .nav-link {
             color: inherit;
             text-decoration: none;
             font-weight: 600;
             padding: 0.75rem 1.5rem;
             border-radius: 1rem;
             transition: all 0.3s;
             position: relative;
             background: transparent;
         }

         .nav-link:hover {
             color: var(--primary);
             background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(59, 130, 246, 0.1));
             transform: translateY(-2px);
         }

         .nav-link::after {
             content: '';
             position: absolute;
             bottom: 0.25rem;
             left: 50%;
             width: 0;
             height: 3px;
             background: linear-gradient(90deg, #7c3aed, #3b82f6);
             border-radius: 999px;
             transform: translateX(-50%);
             transition: width 0.3s ease;
         }

         .nav-link:hover::after {
             width: 65%;
         }

         body.dark .nav-link {
             color: var(--muted-foreground);
         }

         body.dark .nav-link:hover {
             color: #c4b5fd;
         }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <!-- Logo -->
                <a href="/" class="logo-section" style="text-decoration: none; color: inherit;">
                    <div class="logo">
                        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="crownGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#ffd700" />
                                    <stop offset="50%" stop-color="#ffffff" />
                                    <stop offset="100%" stop-color="#ffd700" />
                                </linearGradient>
                            </defs>
                            <rect x="3" y="16" width="18" height="3" fill="url(#crownGradient)" stroke="#ffffff" stroke-width="0.5" rx="1.5" />
                            <path d="M4 16L3 6L6 11L12 3L18 11L21 6L20 16H4Z" fill="url(#crownGradient)" stroke="#ffffff" stroke-width="1" />
                            <circle cx="12" cy="9" r="1.5" fill="#e11d48" stroke="#ffffff" stroke-width="0.5" />
                        </svg>
                    </div>
                    <div class="logo-text">
                        <h1>PowerChess</h1>
                        <p>‚ôî –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</p>
                    </div>
                </a>

                <!-- Navigation -->
                <nav class="nav">
                    <a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="/course" class="nav-link">–ö—É—Ä—Å—ã</a>
                    <a href="/couch#coaches" class="nav-link">–¢—Ä–µ–Ω–µ—Ä–∞</a>
                    <a href="/#reviews" class="nav-link">–û—Ç–∑—ã–≤—ã</a>
                    <a href="/#tournaments" class="nav-link">
                        –¢—É—Ä–Ω–∏—Ä—ã
                        <span class="badge badge-primary" style="margin-left: 0.5rem; padding: 0.25rem 0.75rem; font-size: 0.65rem;">–ù–æ–≤–æ–µ</span>
                    </a>
                </nav>

                <!-- Header Actions -->
                <div class="header-actions">
                    <!-- Notifications -->
                    <button class="icon-button" aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </button>

                    <!-- Settings -->
                    <button class="icon-button" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                        <i class="fas fa-cog"></i>
                    </button>

                    <!-- Theme Toggle -->
                    <button class="theme-toggle" onclick="toggleTheme()" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                        <i class="fas fa-sun" id="themeIcon"></i>
                    </button>

                    <!-- Logout -->
                    <button class="btn btn-outline logout-btn">
                        <i class="fas fa-sign-out-alt" style="margin-right: 0.5rem;"></i>
                        –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Chess Pattern Background -->
    <div class="chess-pattern-bg"></div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Welcome Card -->
            <div class="welcome-card">
                <div class="welcome-content">
                    <div class="welcome-left">
                        <div class="welcome-header">
                            <div class="crown-avatar">
                                <i class="fas fa-crown" style="color: white; font-size: 2rem;"></i>
                            </div>
                            <div>
                                <h2 class="welcome-title" id="greeting">–î–æ–±—Ä—ã–π –¥–µ–Ω—å, –ì—Ä–æ—Å—Å–º–µ–π—Å—Ç–µ—Ä!</h2>
                                <p class="welcome-subtitle" id="motivationalMessage">–ö–∞–∂–¥—ã–π –º–∞—Å—Ç–µ—Ä –∫–æ–≥–¥–∞-—Ç–æ –±—ã–ª –Ω–æ–≤–∏—á–∫–æ–º</p>
                            </div>
                        </div>
                    </div>

                    <div class="streak-badge">
                        <span class="streak-emoji">üî•</span>
                        <div>
                            <div class="streak-text">12 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                            <div class="streak-subtext" style="font-size: 0.875rem; color: var(--muted-foreground);">–¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-card-content">
                        <div class="stat-icon purple">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div>
                            <div class="stat-value purple">3</div>
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫—É—Ä—Å–æ–≤</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-card-content">
                        <div class="stat-icon amber">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div>
                            <div class="stat-value amber">12</div>
                            <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-card-content">
                        <div class="stat-icon green">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div>
                            <div class="stat-value green">35</div>
                            <div class="stat-label">–£—Ä–æ–∫–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-card-content">
                        <div class="stat-icon blue">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div>
                            <div class="stat-value blue">1650</div>
                            <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tabs Container -->
            <div class="tabs-container">
                <div class="tabs-header">
                    <button class="tab-button active" onclick="switchTab('courses')">
                        <i class="fas fa-graduation-cap"></i>
                        –ú–æ–∏ –∫—É—Ä—Å—ã
                    </button>
                    <button class="tab-button" onclick="switchTab('files')">
                        <i class="fas fa-folder-open"></i>
                        –ú–æ–∏ —Ñ–∞–π–ª—ã
                    </button>
                    <button class="tab-button" onclick="switchTab('repetition')">
                        <i class="fas fa-brain"></i>
                        –°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
                    </button>
                </div>

                <!-- Courses Tab -->
                <div class="tab-content active" id="courses-tab">
                    <h3 class="section-title" style="margin-top: 2rem;">
                        <i class="fas fa-book-open"></i>
                        –ú–æ–∏ –∫—É—Ä—Å—ã (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
                    </h3>
                    <div id="myCoursesList"></div>

                    <h3 class="section-title" style="margin-top: 2rem;">
                        <i class="fas fa-lock"></i>
                        –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã
                    </h3>
                    <div id="lockedCoursesList"></div>
                </div>

                <!-- Files Tab -->
                <div class="tab-content" id="files-tab">
                    <h2 class="section-title" style="font-size: 1.5rem; margin-bottom: 1.5rem;">
                        <i class="fas fa-folder-open"></i>
                        –í—Å–µ –º–æ–∏ —Ñ–∞–π–ª—ã
                    </h2>

                    <div class="files-list">
                        <div class="file-item">
                            <div class="file-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="file-info">
                                <div class="file-name">–î–µ–±—é—Ç –ì—Ä–æ–±–∞ - –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã.pgn</div>
                                <div class="file-meta">
                                    <i class="fas fa-tag"></i> –û–ø—Ä–æ–≤–µ—Ä–∂–µ–Ω–∏–µ –¥–µ–±—é—Ç–∞ –ì—Ä–æ–±–∞ ‚Ä¢
                                    <i class="fas fa-calendar"></i> 15 —è–Ω–≤–∞—Ä—è 2024 ‚Ä¢
                                    <i class="fas fa-file"></i> 24 KB
                                </div>
                            </div>
                            <div class="file-actions">
                                <button class="file-btn" onclick="viewPGN('–î–µ–±—é—Ç –ì—Ä–æ–±–∞ - –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã')">
                                    <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                                <button class="file-btn" style="background: linear-gradient(135deg, #10b981, #059669);">
                                    <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å
                                </button>
                            </div>
                        </div>

                        <div class="file-item">
                            <div class="file-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="file-info">
                                <div class="file-name">–ó–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–±—é—Ç–∞ –ì—Ä–æ–±–∞ - –ü—Ä–∞–∫—Ç–∏–∫–∞.pgn</div>
                                <div class="file-meta">
                                    <i class="fas fa-tag"></i> –û–ø—Ä–æ–≤–µ—Ä–∂–µ–Ω–∏–µ –¥–µ–±—é—Ç–∞ –ì—Ä–æ–±–∞ ‚Ä¢
                                    <i class="fas fa-calendar"></i> 12 —è–Ω–≤–∞—Ä—è 2024 ‚Ä¢
                                    <i class="fas fa-file"></i> 18 KB
                                </div>
                            </div>
                            <div class="file-actions">
                                <button class="file-btn" onclick="viewPGN('–ó–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–±—é—Ç–∞ –ì—Ä–æ–±–∞ - –ü—Ä–∞–∫—Ç–∏–∫–∞')">
                                    <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                                <button class="file-btn" style="background: linear-gradient(135deg, #10b981, #059669);">
                                    <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å
                                </button>
                            </div>
                        </div>

                        <div class="file-item">
                            <div class="file-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="file-info">
                                <div class="file-name">–¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–æ—Ç–∏–≤—ã - –î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä.pgn</div>
                                <div class="file-meta">
                                    <i class="fas fa-tag"></i> –¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ ‚Ä¢
                                    <i class="fas fa-calendar"></i> 10 —è–Ω–≤–∞—Ä—è 2024 ‚Ä¢
                                    <i class="fas fa-file"></i> 32 KB
                                </div>
                            </div>
                            <div class="file-actions">
                                <button class="file-btn" onclick="viewPGN('–¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–æ—Ç–∏–≤—ã - –î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä')">
                                    <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                                <button class="file-btn" style="background: linear-gradient(135deg, #10b981, #059669);">
                                    <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å
                                </button>
                            </div>
                        </div>

                        <div class="file-item">
                            <div class="file-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="file-info">
                                <div class="file-name">–≠–Ω–¥—à–ø–∏–ª—å - –ö–æ—Ä–æ–ª—å –∏ –ø–µ—à–∫–∞.pgn</div>
                                <div class="file-meta">
                                    <i class="fas fa-tag"></i> –≠–Ω–¥—à–ø–∏–ª—å –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö ‚Ä¢
                                    <i class="fas fa-calendar"></i> 8 —è–Ω–≤–∞—Ä—è 2024 ‚Ä¢
                                    <i class="fas fa-file"></i> 15 KB
                                </div>
                            </div>
                            <div class="file-actions">
                                <button class="file-btn" onclick="viewPGN('–≠–Ω–¥—à–ø–∏–ª—å - –ö–æ—Ä–æ–ª—å –∏ –ø–µ—à–∫–∞')">
                                    <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                                <button class="file-btn" style="background: linear-gradient(135deg, #10b981, #059669);">
                                    <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å
                                </button>
                            </div>
                        </div>

                        <div class="file-item">
                            <div class="file-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="file-info">
                                <div class="file-name">–°–≤—è–∑–∫–∞ –∏ —Ä–∞–∑–≤—è–∑–∫–∞ - –ü—Ä–∏–º–µ—Ä—ã.pgn</div>
                                <div class="file-meta">
                                    <i class="fas fa-tag"></i> –¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ ‚Ä¢
                                    <i class="fas fa-calendar"></i> 5 —è–Ω–≤–∞—Ä—è 2024 ‚Ä¢
                                    <i class="fas fa-file"></i> 28 KB
                                </div>
                            </div>
                            <div class="file-actions">
                                <button class="file-btn" onclick="viewPGN('–°–≤—è–∑–∫–∞ –∏ —Ä–∞–∑–≤—è–∑–∫–∞ - –ü—Ä–∏–º–µ—Ä—ã')">
                                    <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                                <button class="file-btn" style="background: linear-gradient(135deg, #10b981, #059669);">
                                    <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Repetition Tab -->
                <div class="tab-content" id="repetition-tab">
                    <h2 class="section-title" style="font-size: 1.5rem; margin-bottom: 1.5rem;">
                        <i class="fas fa-brain"></i>
                        –°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
                    </h2>

                    <div style="background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(59, 130, 246, 0.1)); border-radius: 1.5rem; padding: 2rem; margin-bottom: 2rem; border: 2px solid rgba(124, 58, 237, 0.2);">
                        <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem;">
                            <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #7c3aed, #3b82f6); display: flex; align-items: center; justify-content: center; color: white; font-size: 2.5rem; box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <div style="flex: 1;">
                                <h3 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 0.5rem;">–¢—Ä–µ–Ω–∏—Ä—É–π—Ç–µ—Å—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ</h3>
                                <p style="color: var(--muted-foreground); font-size: 1.05rem;">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</p>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div style="background: rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); padding: 1.5rem; border-radius: 1rem; border: 1px solid rgba(124, 58, 237, 0.1);">
                                <div style="font-size: 2rem; font-weight: 800; color: #7c3aed; margin-bottom: 0.25rem;">24</div>
                                <div style="color: var(--muted-foreground); font-size: 0.95rem; font-weight: 600;">–í–∞—Ä–∏–∞–Ω—Ç–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è</div>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); padding: 1.5rem; border-radius: 1rem; border: 1px solid rgba(124, 58, 237, 0.1);">
                                <div style="font-size: 2rem; font-weight: 800; color: #10b981; margin-bottom: 0.25rem;">87%</div>
                                <div style="color: var(--muted-foreground); font-size: 0.95rem; font-weight: 600;">–°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å</div>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); padding: 1.5rem; border-radius: 1rem; border: 1px solid rgba(124, 58, 237, 0.1);">
                                <div style="font-size: 2rem; font-weight: 800; color: #f59e0b; margin-bottom: 0.25rem;">12</div>
                                <div style="color: var(--muted-foreground); font-size: 0.95rem; font-weight: 600;">–î–Ω–µ–π —Å–µ—Ä–∏–∏</div>
                            </div>
                        </div>
                    </div>

                    <div style="display: grid; gap: 1.5rem;">
                        <!-- Variant 1 -->
                        <div style="background: var(--secondary); border-radius: 1.5rem; padding: 2rem; border: 2px solid var(--border); transition: all 0.3s;" onmouseover="this.style.borderColor='rgba(124, 58, 237, 0.3)'; this.style.transform='translateX(4px)'" onmouseout="this.style.borderColor='var(--border)'; this.style.transform='translateX(0)'">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <div style="flex: 1;">
                                    <h4 style="font-size: 1.25rem; font-weight: 800; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.75rem;">
                                        <span style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #7c3aed, #3b82f6); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.25rem;"><i class="fas fa-chess-pawn"></i></span>
                                        <span>–û–ø—Ä–æ–≤–µ—Ä–∂–µ–Ω–∏–µ –¥–µ–±—é—Ç–∞ –ì—Ä–æ–±–∞ - –í–∞—Ä–∏–∞–Ω—Ç 1</span>
                                    </h4>
                                    <p style="color: var(--muted-foreground); margin-bottom: 1rem;">1.g4 d5 2.Bg2 e5 3.c4 - –ö–æ–Ω—Ç—Ä–≥–∞–º–±–∏—Ç –õ–∞–Ω–≥–µ</p>
                                    
                                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span style="padding: 0.5rem 1rem; background: rgba(16, 185, 129, 0.15); color: #10b981; border-radius: 2rem; font-size: 0.875rem; font-weight: 700; border: 1px solid rgba(16, 185, 129, 0.2);">
                                            <i class="fas fa-check"></i> –ò–∑—É—á–µ–Ω–æ
                                        </span>
                                        <span style="padding: 0.5rem 1rem; background: rgba(245, 158, 11, 0.15); color: #f59e0b; border-radius: 2rem; font-size: 0.875rem; font-weight: 700; border: 1px solid rgba(245, 158, 11, 0.2);">
                                            <i class="fas fa-clock"></i> –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 2 –¥–Ω—è
                                        </span>
                                        <span style="padding: 0.5rem 1rem; background: rgba(124, 58, 237, 0.15); color: #7c3aed; border-radius: 2rem; font-size: 0.875rem; font-weight: 700; border: 1px solid rgba(124, 58, 237, 0.2);">
                                            <i class="fas fa-chart-line"></i> –¢–æ—á–Ω–æ—Å—Ç—å: 92%
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                                <button class="btn btn-primary" style="flex: 1; font-size: 0.95rem;" onclick="repeatLesson('–û–ø—Ä–æ–≤–µ—Ä–∂–µ–Ω–∏–µ –¥–µ–±—é—Ç–∞ –ì—Ä–æ–±–∞ - –í–∞—Ä–∏–∞–Ω—Ç 1','course-1')">
                                    <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
                                </button>
                                <button class="btn btn-outline" style="flex: 1; font-size: 0.95rem;" onclick="window.location.href='/spaced-repetition'">
                                    <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                            </div>
                        </div>

                        <!-- Variant 2 -->
                        <div style="background: var(--secondary); border-radius: 1.5rem; padding: 2rem; border: 2px solid var(--border); transition: all 0.3s;" onmouseover="this.style.borderColor='rgba(124, 58, 237, 0.3)'; this.style.transform='translateX(4px)'" onmouseout="this.style.borderColor='var(--border)'; this.style.transform='translateX(0)'">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <div style="flex: 1;">
                                    <h4 style="font-size: 1.25rem; font-weight: 800; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.75rem;">
                                        <span style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #22c55e, #10b981); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.25rem;"><i class="fas fa-chess-knight"></i></span>
                                        <span>–¢–∞–∫—Ç–∏–∫–∞ - –î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä</span>
                                    </h4>
                                    <p style="color: var(--muted-foreground); margin-bottom: 1rem;">–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–≤–æ–π–Ω–æ–≥–æ —É–¥–∞—Ä–∞ –≤ –º–∏—Ç—Ç–µ–ª—å—à–ø–∏–ª–µ</p>
                                    
                                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span style="padding: 0.5rem 1rem; background: rgba(239, 68, 68, 0.15); color: #ef4444; border-radius: 2rem; font-size: 0.875rem; font-weight: 700; border: 1px solid rgba(239, 68, 68, 0.2);">
                                            <i class="fas fa-exclamation-triangle"></i> –¢—Ä–µ–±—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
                                        </span>
                                        <span style="padding: 0.5rem 1rem; background: rgba(124, 58, 237, 0.15); color: #7c3aed; border-radius: 2rem; font-size: 0.875rem; font-weight: 700; border: 1px solid rgba(124, 58, 237, 0.2);">
                                            <i class="fas fa-chart-line"></i> –¢–æ—á–Ω–æ—Å—Ç—å: 78%
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                                <button class="btn btn-primary" style="flex: 1; font-size: 0.95rem;" onclick="repeatLesson('–¢–∞–∫—Ç–∏–∫–∞ - –î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä','course-2')">
                                    <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
                                </button>
                                <button class="btn btn-outline" style="flex: 1; font-size: 0.95rem;" onclick="window.location.href='/spaced-repetition'">
                                    <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                            </div>
                        </div>

                        <!-- Variant 3 -->
                        <div style="background: var(--secondary); border-radius: 1.5rem; padding: 2rem; border: 2px solid var(--border); transition: all 0.3s;" onmouseover="this.style.borderColor='rgba(124, 58, 237, 0.3)'; this.style.transform='translateX(4px)'" onmouseout="this.style.borderColor='var(--border)'; this.style.transform='translateX(0)'">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <div style="flex: 1;">
                                    <h4 style="font-size: 1.25rem; font-weight: 800; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.75rem;">
                                        <span style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #f59e0b, #f97316); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.25rem;"><i class="fas fa-chess-king"></i></span>
                                        <span>–≠–Ω–¥—à–ø–∏–ª—å - –ö–æ—Ä–æ–ª—å –∏ –ø–µ—à–∫–∞</span>
                                    </h4>
                                    <p style="color: var(--muted-foreground); margin-bottom: 1rem;">–ü—Ä–∞–≤–∏–ª–æ –∫–≤–∞–¥—Ä–∞—Ç–∞ –∏ –æ–ø–ø–æ–∑–∏—Ü–∏—è</p>
                                    
                                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span style="padding: 0.5rem 1rem; background: rgba(16, 185, 129, 0.15); color: #10b981; border-radius: 2rem; font-size: 0.875rem; font-weight: 700; border: 1px solid rgba(16, 185, 129, 0.2);">
                                            <i class="fas fa-check"></i> –ò–∑—É—á–µ–Ω–æ
                                        </span>
                                        <span style="padding: 0.5rem 1rem; background: rgba(245, 158, 11, 0.15); color: #f59e0b; border-radius: 2rem; font-size: 0.875rem; font-weight: 700; border: 1px solid rgba(245, 158, 11, 0.2);">
                                            <i class="fas fa-clock"></i> –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è
                                        </span>
                                        <span style="padding: 0.5rem 1rem; background: rgba(124, 58, 237, 0.15); color: #7c3aed; border-radius: 2rem; font-size: 0.875rem; font-weight: 700; border: 1px solid rgba(124, 58, 237, 0.2);">
                                            <i class="fas fa-chart-line"></i> –¢–æ—á–Ω–æ—Å—Ç—å: 95%
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                                <button class="btn btn-primary" style="flex: 1; font-size: 0.95rem;" onclick="repeatLesson('–≠–Ω–¥—à–ø–∏–ª—å - –ö–æ—Ä–æ–ª—å –∏ –ø–µ—à–∫–∞','course-3')">
                                    <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
                                </button>
                                <button class="btn btn-outline" style="flex: 1; font-size: 0.95rem;" onclick="window.location.href='/spaced-repetition'">
                                    <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Video Modal -->
    <div class="modal" id="videoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">–£—Ä–æ–∫</h3>
                <button class="modal-close" onclick="closeModal('videoModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="video-container">
                    <div class="video-placeholder">
                        <i class="fas fa-play-circle"></i>
                    </div>
                </div>
                <div style="display:flex; gap: 1rem; margin-top: 1rem;">
                    <button class="btn btn-primary" onclick="repeatCurrentLesson()">
                        <i class="fas fa-redo"></i> –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
                    </button>
                    <button class="btn btn-outline" onclick="repeatCurrentLesson()">
                        <i class="fas fa-bolt"></i> –ñ—ë—Å—Ç–∫–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
                    </button>
                </div>
                <h3 class="section-title" style="margin-top: 2rem;">
                    <i class="fas fa-file-code"></i>
                    PGN —Ñ–∞–π–ª —É—Ä–æ–∫–∞
                </h3>
                <div class="pgn-viewer" id="lessonPGN">
                    –ó–∞–≥—Ä—É–∑–∫–∞ PGN —Ñ–∞–π–ª–∞...
                </div>
            </div>
        </div>
    </div>

    <!-- PGN Modal -->
    <div class="modal" id="pgnModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="pgnModalTitle">PGN —Ñ–∞–π–ª</h3>
                <button class="modal-close" onclick="closeModal('pgnModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="pgn-viewer" id="pgnContent">
                    –ó–∞–≥—Ä—É–∑–∫–∞ PGN —Ñ–∞–π–ª–∞...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock PGN data
        const pgnData = {
            'course-1': `[Event "–î–µ–±—é—Ç –ì—Ä–æ–±–∞ - –£—Ä–æ–∫ 1"]
[Site "PowerChess"]
[Date "2024.01.15"]
[White "–ü—Ä–∏–º–µ—Ä"]
[Black "–ó–∞—â–∏—Ç–∞"]
[Result "1-0"]

1. g4 d5 2. Bg2 e5 3. c4 c6 4. cxd5 cxd5 5. Nc3 Ne7 
6. Qb3 Nbc6 7. Qxd5 Qxd5 8. Nxd5 Nxd5 9. Bxd5 Be6 
10. Bxc6+ bxc6 11. Nf3 Bd6 12. d3 O-O 13. O-O f5 
14. gxf5 Bxf5 15. Ng5 h6 16. Ne4 Be7 17. Nc3 Bf6 
18. Be3 Rfd8 19. Rad1 1-0`,

            'course-2': `[Event "–¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ - –£—Ä–æ–∫ 1"]
[Site "PowerChess"]
[Date "2024.01.10"]
[White "–î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä"]
[Black "–ü—Ä–∏–º–µ—Ä"]
[Result "1-0"]

1. e4 e5 2. Nf3 Nc6 3. Bc4 Bc5 4. c3 Nf6 5. d4 exd4 
6. cxd4 Bb4+ 7. Bd2 Bxd2+ 8. Nbxd2 d5 9. exd5 Nxd5 
10. Qb3 Na5 11. Qa4+ Nc6 12. Bb5 Nde7 13. O-O O-O 
14. Rfe1 Bd7 15. Bxc6 Bxc6 16. Qc2 1-0`,

            'course-3': `[Event "–≠–Ω–¥—à–ø–∏–ª—å - –£—Ä–æ–∫ 1"]
[Site "PowerChess"]
[Date "2024.01.08"]
[White "–ö–æ—Ä–æ–ª—å –∏ –ø–µ—à–∫–∞"]
[Black "–¢–µ–æ—Ä–∏—è"]
[Result "1-0"]

1. e4 e5 2. Nf3 Nc6 3. d4 exd4 4. Nxd4 Nf6 5. Nxc6 bxc6 
6. e5 Nd5 7. c4 Nb6 8. Bd3 d6 9. exd6 Qxd6 10. O-O Be7 
11. Nc3 O-O 12. Re1 Bf6 13. Ne4 Qd8 14. Nxf6+ Qxf6 
15. Qf3 Qxf3 16. gxf3 1-0`
        };

        // Greeting
        function updateGreeting() {
            const hour = new Date().getHours();
            let greeting = '–î–æ–±—Ä—ã–π –¥–µ–Ω—å';
            if (hour < 12) greeting = '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ';
            else if (hour >= 18) greeting = '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä';
            
            document.getElementById('greeting').textContent = `${greeting}, –ì—Ä–æ—Å—Å–º–µ–π—Å—Ç–µ—Ä!`;
        }

        const messages = [
            '–ö–∞–∂–¥—ã–π –º–∞—Å—Ç–µ—Ä –∫–æ–≥–¥–∞-—Ç–æ –±—ã–ª –Ω–æ–≤–∏—á–∫–æ–º',
            '–®–∞—Ö–º–∞—Ç—ã - —ç—Ç–æ –≥–∏–º–Ω–∞—Å—Ç–∏–∫–∞ –¥–ª—è —É–º–∞',
            '–ü–æ–±–µ–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫ —Ç–µ–º, –∫—Ç–æ —É–ø–æ—Ä–Ω–æ —Ç—Ä–µ–Ω–∏—Ä—É–µ—Ç—Å—è',
            '–í —à–∞—Ö–º–∞—Ç–∞—Ö –∫–∞–∫ –≤ –∂–∏–∑–Ω–∏ - –≤–∞–∂–Ω–∞ –∫–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å'
        ];

        function updateMessage() {
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            document.getElementById('motivationalMessage').textContent = randomMessage;
        }

        updateGreeting();
        updateMessage();

        // Tabs
        function switchTab(tabName) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.closest('.tab-button').classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // Course accordion
        function toggleCourse(courseId) {
            const course = document.getElementById(courseId);
            const isExpanded = course.classList.contains('expanded');
            
            // Close all courses
            document.querySelectorAll('.course-card').forEach(card => {
                card.classList.remove('expanded');
            });
            
            // Open clicked course if it wasn't expanded
            if (!isExpanded) {
                course.classList.add('expanded');
            }
        }

        // Track current lesson for repetition
        let currentLessonTitle = '';
        let currentCourseId = '';

        // Open lesson
        function openLesson(lessonTitle, courseId) {
            document.getElementById('modalTitle').textContent = lessonTitle;
            currentLessonTitle = lessonTitle;
            currentCourseId = courseId;
            
            // Load corresponding PGN
            const pgn = pgnData[courseId] || 'PGN —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω';
            document.getElementById('lessonPGN').textContent = pgn;
            
            showModal('videoModal');
        }

        // Open spaced repetition page with the current lesson context
        function repeatCurrentLesson() {
            const url = new URL('/spaced-repetition', window.location.origin);
            if (currentLessonTitle) url.searchParams.set('lesson', currentLessonTitle);
            if (currentCourseId) url.searchParams.set('course', currentCourseId);
            window.location.href = url.toString();
        }

        // Direct repeat for a given lesson (can be used on buttons inside lesson lists)
        function repeatLesson(lessonTitle, courseId) {
            currentLessonTitle = lessonTitle;
            currentCourseId = courseId;
            repeatCurrentLesson();
        }

        // View PGN
        function viewPGN(fileName) {
            document.getElementById('pgnModalTitle').textContent = fileName;
            
            // Generate sample PGN based on file name
            let pgn = `[Event "${fileName}"]
[Site "PowerChess"]
[Date "2024.01.15"]
[White "–ü—Ä–∏–º–µ—Ä"]
[Black "–ê–Ω–∞–ª–∏–∑"]
[Result "*"]

1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 
6. Re1 b5 7. Bb3 d6 8. c3 O-O 9. h3 Na5 10. Bc2 c5 
11. d4 Qc7 12. Nbd2 cxd4 13. cxd4 Nc6 14. Nb3 a5 
15. Be3 a4 16. Nbd2 Bd7 17. Rc1 Qb7 18. Nf1 *`;
            
            document.getElementById('pgnContent').textContent = pgn;
            showModal('pgnModal');
        }

        // Modal management
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close on backdrop click
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        // Close on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                document.body.style.overflow = '';
            }
        });

        // Include common auth functions
        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
        });
    </script>

    <!-- Common Auth Script (must load first) -->
    <script src="auth.js"></script>
    <!-- Page script -->
    <script src="cabinet.js"></script>
</body>
</html>
