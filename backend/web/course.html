<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerChess — Ultimate Курсы</title>
    
    <meta name="description" content="Выберите и купите шахматные курсы PowerChess: уровни, отзывы, тренеры.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Common Styles -->
    <link rel="stylesheet" href="/styles/variables.css">
    <link rel="stylesheet" href="/styles/common.css">
    <link rel="stylesheet" href="/styles/navigation.css">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>♔</text></svg>">
    
    <style>
        /* ===== COURSE-SPECIFIC STYLES ===== */
        /* Общие стили вынесены в common.css и variables.css */
        
        /* View specific course mode */
        #course-lessons { display: none; }
        body.view-course .hero { display: none !important; }
        body.view-course #catalog { display: none !important; }
        body.view-course #levelFilters { display: none !important; }
        body.view-course #course-lessons { display: block; }
        
        
        @keyframes logoGlow {
            0%, 100% {
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3),
                            0 0 30px rgba(255, 215, 0, 0.3),
                            inset 0 2px 0 rgba(255, 255, 255, 0.1);
            }
            50% {
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4),
                            0 0 40px rgba(255, 215, 0, 0.5),
                            inset 0 2px 0 rgba(255, 255, 255, 0.2);
            }
        }
        
        @keyframes sparkle {
            0%, 100% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1); opacity: 1; }
        }
        
        .logo-sparkle {
            position: absolute;
            width: 0.5rem;
            height: 0.5rem;
            background: #ffd700;
            border-radius: 50%;
            animation: sparkle 2s ease-in-out infinite;
        }
        
        .logo-sparkle:nth-child(1) { top: 0.5rem; left: 0.5rem; animation-delay: 0s; }
        .logo-sparkle:nth-child(2) { top: 0.5rem; right: 0.5rem; animation-delay: 0.5s; }
        .logo-sparkle:nth-child(3) { bottom: 0.5rem; left: 0.5rem; animation-delay: 1s; }
        .logo-sparkle:nth-child(4) { bottom: 0.5rem; right: 0.5rem; animation-delay: 1.5s; }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border-radius: 1rem;
            font-weight: 600;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            color: #fff;
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(124, 58, 237, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: #fff;
            transform: translateY(-2px);
        }
        
        /* ===== ENHANCED HEADER ===== */
        .header {
            position: relative;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
            z-index: 1000;
            transition: all 0.3s;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
        }

        body.dark .header {
            background: rgba(15, 15, 35, 0.98);
            border-bottom: 1px solid rgba(76, 106, 158, 0.35);
        }

        .header.scrolled {
            box-shadow: 0 10px 40px rgba(124, 58, 237, 0.15);
            border-bottom-color: rgba(124, 58, 237, 0.2);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 5.5rem;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
            color: inherit;
            transition: transform 0.3s;
            position: relative;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-icon {
            width: 4rem;
            height: 4rem;
            background: linear-gradient(135deg, #1f2937, #000000);
            border-radius: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.3),
                0 0 30px rgba(255, 215, 0, 0.3),
                inset 0 2px 0 rgba(255, 255, 255, 0.1);
            border: 3px solid rgba(255, 215, 0, 0.4);
            animation: logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% { box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 215, 0, 0.3), inset 0 2px 0 rgba(255, 255, 255, 0.1); }
            50% { box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 40px rgba(255, 215, 0, 0.5), inset 0 2px 0 rgba(255, 255, 255, 0.2); }
        }

        .chess-pattern {
            position: absolute;
            inset: 0;
            opacity: 0.2;
            background: 
                linear-gradient(45deg, #ffffff 25%, transparent 25%),
                linear-gradient(-45deg, #ffffff 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #ffffff 75%),
                linear-gradient(-45deg, transparent 75%, #ffffff 75%);
            background-size: 10px 10px;
            background-position: 0 0, 0 5px, 5px -5px, -5px 0px;
        }

        .logo-sparkle {
            position: absolute;
            width: 0.5rem;
            height: 0.5rem;
            background: #ffd700;
            border-radius: 50%;
            animation: sparkle 2s ease-in-out infinite;
        }

        .logo-sparkle:nth-child(1) { top: 0.5rem; left: 0.5rem; animation-delay: 0s; }
        .logo-sparkle:nth-child(2) { top: 0.5rem; right: 0.5rem; animation-delay: 0.5s; }
        .logo-sparkle:nth-child(3) { bottom: 0.5rem; left: 0.5rem; animation-delay: 1s; }
        .logo-sparkle:nth-child(4) { bottom: 0.5rem; right: 0.5rem; animation-delay: 1.5s; }

        @keyframes sparkle {
            0%, 100% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1); opacity: 1; }
        }

        .nav {
            display: none;
            align-items: center;
            gap: 0.5rem;
        }

        @media (min-width: 1024px) {
            .nav { display: flex; }
        }

        .nav-link {
            color: inherit;
            text-decoration: none;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 1rem;
            transition: all 0.3s;
            position: relative;
            background: transparent;
        }

        .nav-link:hover {
            color: var(--primary);
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(59, 130, 246, 0.1));
            transform: translateY(-2px);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0.25rem;
            left: 50%;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, #7c3aed, #3b82f6);
            border-radius: 2px;
            transition: all 0.3s;
            transform: translateX(-50%);
        }

        .nav-link:hover::after {
            width: 60%;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .auth-buttons {
            display: none;
            align-items: center;
            gap: 0.75rem;
        }

        @media (min-width: 1024px) {
            .auth-buttons { display: flex; }
            .user-actions { display: flex; }
        }

        .btn-login {
            padding: 0.75rem 1.75rem;
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            border-radius: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .btn-login::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--primary);
            transition: left 0.3s;
            z-index: -1;
        }

        .btn-login:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(124, 58, 237, 0.3);
        }

        .btn-login:hover::before {
            left: 0;
        }

        .btn-register {
            padding: 0.75rem 1.75rem;
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            color: white;
            border: none;
            border-radius: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(124, 58, 237, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-register::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn-register:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(124, 58, 237, 0.4);
        }

        .btn-register:hover::before {
            left: 100%;
        }

        .btn-secondary {
            padding: 0.75rem 1.75rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            border-radius: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(245, 158, 11, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.4);
        }

        .btn-secondary:hover::before {
            left: 100%;
        }

        .theme-toggle {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(59, 130, 246, 0.1));
            border: 2px solid var(--primary);
            border-radius: 50%;
            width: 3.5rem;
            height: 3.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--primary);
            position: relative;
            overflow: hidden;
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .theme-toggle:hover {
            transform: rotate(20deg) scale(1.1);
            box-shadow: 0 5px 20px rgba(124, 58, 237, 0.4);
        }

        .theme-toggle:hover::before {
            opacity: 1;
        }

        .theme-toggle i {
            position: relative;
            z-index: 2;
            font-size: 1.25rem;
        }

        .theme-toggle:hover i {
            color: white;
        }

        .mobile-menu-btn {
            display: block;
            background: none;
            border: none;
            color: inherit;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        @media (min-width: 1024px) {
            .mobile-menu-btn { display: none; }
        }

        .mobile-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card-light);
            border-top: 2px solid var(--primary);
            padding: 2rem;
            transform: translateY(-100%);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            display: none;
        }

        body.dark .mobile-menu {
            background: var(--card-dark);
        }

        .mobile-menu.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
            display: block;
        }

        .mobile-auth {
            display: none;
            flex-direction: column;
            gap: 0.75rem;
            width: 100%;
        }
        
        /* Hero */
        .hero {
            padding: 9rem 0 3rem;
            position: relative;
        }
        
        .hero-sub {
            color: var(--muted);
            margin-top: 0.5rem;
            font-size: 1.125rem;
        }
        
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
        }
        
        .filter-chip {
            padding: 0.75rem 1.5rem;
            border-radius: 999px;
            border: 2px solid var(--border-light);
            background: var(--card-light);
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.95rem;
        }
        
        body.dark .filter-chip {
            background: var(--card-dark);
            border-color: var(--border-dark);
        }
        
        .filter-chip:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(124, 58, 237, 0.15);
        }
        
        .filter-chip.active {
            color: #fff;
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            border-color: transparent;
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.3);
        }
        
        /* Courses Grid */
        .courses-grid {
            display: grid;
            grid-template-columns: repeat(1, minmax(0, 1fr));
            gap: 2rem;
            justify-items: center;
        }
        
        @media (min-width: 640px) {
            .courses-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
        
        @media (min-width: 1024px) {
            .courses-grid {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        
        /* Course Card */
        .course-card {
            border-radius: 2.5rem;
            overflow: hidden;
            border: 2px solid rgba(124, 58, 237, 0.2);
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            display: flex;
            flex-direction: column;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12),
                        0 2px 10px rgba(124, 58, 237, 0.08);
            max-width: 400px;
            width: 100%;
        }
        
        body.dark .course-card {
            background: linear-gradient(135deg, #1e1e3f, #0f0f23);
            border-color: rgba(139, 92, 246, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4),
                        0 2px 15px rgba(139, 92, 246, 0.15),
                        inset 0 1px 0 rgba(139, 92, 246, 0.1);
        }
        
        .course-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #7c3aed, #3b82f6, #10b981);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .course-card:hover::before {
            opacity: 1;
        }
        
        .course-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 40px 80px rgba(124, 58, 237, 0.25),
                        0 0 50px rgba(124, 58, 237, 0.15),
                        0 20px 40px rgba(0, 0, 0, 0.1);
            border-color: rgba(124, 58, 237, 0.4);
        }
        
        .course-image {
            width: 100%;
            height: 260px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            color: #fff;
            cursor: pointer;
        }
        
        .course-image i {
            font-size: 8rem;
            position: relative;
            z-index: 2;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            filter: drop-shadow(0 15px 25px rgba(0, 0, 0, 0.4))
                    drop-shadow(0 5px 10px rgba(255, 255, 255, 0.2));
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5),
                         0 0 40px rgba(255, 215, 0, 0.3);
        }
        
        .course-card:hover .course-image i {
            transform: scale(1.15) rotate(5deg);
            filter: drop-shadow(0 20px 35px rgba(0, 0, 0, 0.5))
                    drop-shadow(0 10px 20px rgba(255, 255, 255, 0.3));
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.8),
                         0 0 60px rgba(255, 215, 0, 0.5);
        }
        
        .course-cover-basic {
            background: radial-gradient(circle at 20% 20%, rgba(139, 92, 246, 0.4), transparent 40%),
                        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.4), transparent 40%),
                        radial-gradient(circle at 50% 50%, rgba(124, 58, 237, 0.2), transparent 70%),
                        linear-gradient(135deg, #8b5cf6, #6366f1, #3b82f6);
        }
        
        .course-cover-tactical {
            background: radial-gradient(circle at 20% 20%, rgba(16, 185, 129, 0.4), transparent 40%),
                        radial-gradient(circle at 80% 80%, rgba(5, 150, 105, 0.4), transparent 40%),
                        radial-gradient(circle at 50% 50%, rgba(34, 197, 94, 0.2), transparent 70%),
                        linear-gradient(135deg, #10b981, #059669, #047857);
        }
        
        .course-cover-master {
            background: radial-gradient(circle at 20% 20%, rgba(245, 158, 11, 0.4), transparent 40%),
                        radial-gradient(circle at 80% 80%, rgba(220, 38, 38, 0.4), transparent 40%),
                        radial-gradient(circle at 50% 50%, rgba(217, 119, 6, 0.2), transparent 70%),
                        linear-gradient(135deg, #f59e0b, #d97706, #dc2626);
        }
        
        .course-level-badge {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            padding: 0.75rem 1.25rem;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.7));
            backdrop-filter: blur(15px);
            color: #fff;
            border-radius: 2.5rem;
            font-size: 0.9rem;
            font-weight: 900;
            z-index: 3;
            border: 2px solid rgba(255, 255, 255, 0.3);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .course-body {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            flex: 1;
        }
        
        .course-body h3 {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-light);
            line-height: 1.3;
            margin-bottom: 0.5rem;
        }
        
        body.dark .course-body h3 {
            color: var(--text-dark);
        }
        
        .course-body p {
            color: var(--muted);
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .trainer {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--muted);
            font-size: 0.95rem;
            font-weight: 700;
            padding: 1rem;
            background: rgba(124, 58, 237, 0.05);
            border-radius: 1rem;
            border-left: 3px solid rgba(124, 58, 237, 0.3);
        }
        
        .trainer i {
            color: #7c3aed;
            font-size: 1.2rem;
        }
        
        .rating-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 900;
            font-size: 1.2rem;
            padding: 1rem;
            background: rgba(245, 158, 11, 0.08);
            border-radius: 1rem;
            border: 1px solid rgba(245, 158, 11, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .rating-row:hover {
            background: rgba(245, 158, 11, 0.15);
            transform: translateY(-2px);
        }
        
        .rating-row .stars {
            color: #f59e0b;
        }
        
        .rating-row .rating-count {
            color: var(--muted);
            font-weight: 700;
            font-size: 1rem;
            background: rgba(245, 158, 11, 0.15);
            padding: 0.5rem 1rem;
            border-radius: 1.5rem;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        /* Reviews Button */
        .reviews-btn {
            width: 100%;
            padding: 1.25rem;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(59, 130, 246, 0.1));
            border: 2px solid rgba(124, 58, 237, 0.3);
            border-radius: 1.5rem;
            color: var(--primary);
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }
        
        .reviews-btn:hover {
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            color: #fff;
            border-color: transparent;
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(124, 58, 237, 0.35);
        }
        
        .reviews-btn i {
            font-size: 1.25rem;
        }
        
        .price-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: auto;
            padding-top: 1.5rem;
            border-top: 2px solid rgba(124, 58, 237, 0.1);
        }
        
        .price {
            font-weight: 900;
            font-size: 2rem;
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .select {
            appearance: none;
            padding: 0.85rem 1.5rem;
            border-radius: 1.25rem;
            border: 2px solid rgba(124, 58, 237, 0.2);
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            color: var(--text-light);
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.1);
        }
        
        .select:focus {
            outline: none;
            border-color: #7c3aed;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.15);
        }
        
        body.dark .select {
            background: linear-gradient(135deg, #1e1e3f, #0f0f23);
            border-color: rgba(139, 92, 246, 0.2);
            color: var(--text-dark);
        }
        
        .card-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .card-actions .btn {
            flex: 1;
            min-width: 120px;
            font-size: 0.95rem;
            padding: 0.85rem 1.5rem;
        }
        
        /* Enhanced Reviews Modal */
        .modal {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg,
                        rgba(124, 58, 237, 0.95),
                        rgba(59, 130, 246, 0.9),
                        rgba(16, 185, 129, 0.85));
            backdrop-filter: blur(20px);
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 1rem;
        }
        
        .modal.active {
            display: flex;
            opacity: 1;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border-radius: 2.5rem;
            padding: 0;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 35px 60px rgba(0, 0, 0, 0.3),
                        0 0 100px rgba(124, 58, 237, 0.2);
            transform: scale(0.8) translateY(50px);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            border: 2px solid rgba(255, 215, 0, 0.3);
            display: flex;
            flex-direction: column;
        }
        
        body.dark .modal-content {
            background: linear-gradient(135deg, #1e1e3f, #0f0f23);
            border-color: rgba(139, 92, 246, 0.3);
        }
        
        .modal.active .modal-content {
            transform: scale(1) translateY(0);
        }
        
        .modal-header {
            padding: 2.5rem 2.5rem 1.5rem;
            border-bottom: 2px solid rgba(124, 58, 237, 0.1);
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.05), rgba(59, 130, 246, 0.05));
            position: relative;
        }
        
        .modal-header h3 {
            font-size: 2rem;
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        
        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: linear-gradient(135deg, #ff4757, #ff3838);
            border: none;
            border-radius: 50%;
            width: 3rem;
            height: 3rem;
            font-size: 1.2rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        .modal-close:hover {
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.5);
        }
        
        .reviews-filters {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        .reviews-body {
            padding: 2rem 2.5rem;
            overflow-y: auto;
            flex: 1;
        }
        
        .reviews-list {
            display: grid;
            gap: 1.5rem;
        }
        
        .review-item {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.9));
            border: 2px solid rgba(124, 58, 237, 0.15);
            border-radius: 1.5rem;
            padding: 2rem;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }
        
        body.dark .review-item {
            background: linear-gradient(135deg, rgba(30, 30, 63, 0.9), rgba(15, 15, 35, 0.9));
            border-color: rgba(139, 92, 246, 0.2);
        }
        
        .review-item:hover {
            transform: translateX(8px);
            box-shadow: 0 15px 35px rgba(124, 58, 237, 0.2);
            border-color: rgba(124, 58, 237, 0.3);
        }
        
        .review-header {
            display: flex;
            align-items: center;
            gap: 1.25rem;
            margin-bottom: 1.25rem;
        }
        
        .review-avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.75rem;
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.35);
            border: 3px solid rgba(255, 255, 255, 0.3);
            flex-shrink: 0;
        }
        
        .review-info {
            flex: 1;
        }
        
        .review-name {
            font-size: 1.25rem;
            font-weight: 800;
            color: var(--text-light);
            margin-bottom: 0.5rem;
        }
        
        body.dark .review-name {
            color: var(--text-dark);
        }
        
        .review-stars {
            color: #f59e0b;
            font-size: 1.25rem;
            text-shadow: 0 1px 3px rgba(245, 158, 11, 0.3);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        .review-date {
            color: var(--muted);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .review-text {
            color: var(--muted);
            font-size: 1.05rem;
            line-height: 1.8;
            padding: 1.5rem;
            background: rgba(124, 58, 237, 0.04);
            border-radius: 1.25rem;
            border-left: 4px solid rgba(124, 58, 237, 0.3);
            position: relative;
        }
        
        .review-text::before {
            content: '"';
            position: absolute;
            top: 0.5rem;
            left: 0.75rem;
            font-size: 3.5rem;
            color: rgba(124, 58, 237, 0.12);
            font-family: serif;
            line-height: 1;
        }
        
        .reviews-empty {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--muted);
        }
        
        .reviews-empty i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }
        
        @media (max-width: 1024px) {
            .header-content {
                flex-wrap: nowrap;
                align-items: center;
                gap: 0.75rem;
            }

            .header-actions {
                margin-left: auto;
                gap: 0.5rem;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero {
                padding: 7rem 0 2.5rem;
            }

            .hero .filters {
                gap: 0.75rem;
            }

            .hero .filters .filter-chip {
                padding: 0.65rem 1.5rem;
            }

            .courses-grid {
                grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            }
        }

        @media (max-width: 768px) {
            html { font-size: 15px; }
            .logo { gap: 0.75rem; }
            .hero { padding: 6rem 0 2rem; }
            .hero h1 { font-size: clamp(2rem, 6.5vw, 3rem); }
            .hero-sub { font-size: 1.05rem; margin-bottom: 1.75rem; }
            .filters { flex-direction: column; gap: 0.75rem; align-items: stretch; }
            .filters .filter-chip { width: 100%; justify-content: center; }
            .courses-grid { grid-template-columns: minmax(0, 1fr); gap: 1.75rem; }
            .course-card { max-width: 100%; }
            .course-card .course-body { padding: 1.5rem; }
            .pricing-table { grid-template-columns: minmax(0, 1fr); }
            .reviews-grid { grid-template-columns: minmax(0, 1fr); }
            .reviews-nav { flex-wrap: wrap; justify-content: center; }
            .mentor-card { flex-direction: column; align-items: flex-start; text-align: left; }
            .mentor-avatar { width: 120px; height: 120px; margin-bottom: 1rem; }
            .modal-content { border-radius: 1.75rem; }
        }
        
        @media (max-width: 640px) {
            .modal-content { border-radius: 1.5rem; max-height: 95vh; }
            .modal-header { padding: 1.5rem; }
            .modal-title { font-size: 1.5rem; }
            .reviews-body { padding: 1.25rem; gap: 1rem; }
            .review-item { padding: 1.25rem; }
            .review-avatar { width: 56px; height: 56px; font-size: 1.5rem; }
            .course-image { height: 200px; }
            .course-image i { font-size: 6rem; }
            .course-meta { flex-direction: column; gap: 0.75rem; align-items: flex-start; }
            .price-row { flex-direction: column; align-items: flex-start; gap: 1rem; }
            .price { font-size: 1.75rem; }
            .controls select { width: 100%; }
            .cta-banner { padding: 1.75rem; text-align: center; }
            .cta-banner .btn { width: 100%; }
        }

        @media (max-width: 480px) {
            html { font-size: 14px; }
            .header-actions { gap: 0.5rem; }
            .auth-buttons,
            .user-actions { display: none; }
            .hero h1 { font-size: clamp(1.75rem, 8vw, 2.5rem); }
            .hero p { font-size: 1rem; }
            .filters .filter-chip { font-size: 0.95rem; padding: 0.6rem 1.25rem; }
            .course-card { padding: 1.5rem; }
            .course-body .rating-row { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
            .reviews-nav { width: 100%; }
            .reviews-nav .filter-chip { flex: 1; text-align: center; }
            .mentor-list { gap: 1.5rem; }
            .mentor-card { padding: 1.5rem; }
            .faq-item { padding: 1.5rem; }
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }
 
            .modal-content {
             background: linear-gradient(135deg, #ffffff, #f8fafc);
             border-radius: 2.5rem;
             padding: 0;
             max-width: 900px;
             width: 100%;
             max-height: 90vh;
             overflow: hidden;
             box-shadow: 0 35px 60px rgba(0, 0, 0, 0.3),
                         0 0 100px rgba(124, 58, 237, 0.2);
             transform: scale(0.8) translateY(50px);
             transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
             position: relative;
             border: 2px solid rgba(255, 215, 0, 0.3);
             display: flex;
             flex-direction: column;
         }
 
         body.dark .modal-content {
             background: linear-gradient(135deg, #1e1e3f, #0f0f23);
             border-color: rgba(139, 92, 246, 0.3);
         }
 
         .modal.active .modal-content {
             transform: scale(1) translateY(0);
            }
            
            .modal-header {
             padding: 2.5rem 2.5rem 1.5rem;
             border-bottom: 2px solid rgba(124, 58, 237, 0.1);
             background: linear-gradient(135deg, rgba(124, 58, 237, 0.05), rgba(59, 130, 246, 0.05));
             position: relative;
         }
 
         .modal-header h3 {
             font-size: 2rem;
             background: linear-gradient(135deg, #7c3aed, #3b82f6);
             -webkit-background-clip: text;
             background-clip: text;
             -webkit-text-fill-color: transparent;
             margin-bottom: 0.5rem;
         }
 
         .modal-close {
             position: absolute;
             top: 1.5rem;
             right: 1.5rem;
             background: linear-gradient(135deg, #ff4757, #ff3838);
             border: none;
             border-radius: 50%;
             width: 3rem;
             height: 3rem;
             font-size: 1.2rem;
             color: white;
             cursor: pointer;
             transition: all 0.3s;
             box-shadow: 0 5px 15px rgba(255, 71, 87, 0.3);
             display: flex;
             align-items: center;
             justify-content: center;
             z-index: 10;
         }
 
         .modal-close:hover {
             transform: rotate(90deg) scale(1.1);
             box-shadow: 0 8px 25px rgba(255, 71, 87, 0.5);
         }
 
         .reviews-filters {
             display: flex;
             gap: 0.75rem;
             flex-wrap: wrap;
             margin-top: 1rem;
            }
            
            .reviews-body {
             padding: 2rem 2.5rem;
             overflow-y: auto;
             flex: 1;
         }
 
         .reviews-list {
             display: grid;
             gap: 1.5rem;
            }
            
            .review-item {
             background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.9));
             border: 2px solid rgba(124, 58, 237, 0.15);
             border-radius: 1.5rem;
             padding: 2rem;
             transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
             box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
         }
 
         body.dark .review-item {
             background: linear-gradient(135deg, rgba(30, 30, 63, 0.9), rgba(15, 15, 35, 0.9));
             border-color: rgba(139, 92, 246, 0.2);
         }
 
         .review-item:hover {
             transform: translateX(8px);
             box-shadow: 0 15px 35px rgba(124, 58, 237, 0.2);
             border-color: rgba(124, 58, 237, 0.3);
         }
 
         .review-header {
             display: flex;
             align-items: center;
             gap: 1.25rem;
             margin-bottom: 1.25rem;
            }
            
            .review-avatar {
             width: 64px;
             height: 64px;
             border-radius: 50%;
             background: linear-gradient(135deg, #8b5cf6, #3b82f6);
             color: #fff;
             display: flex;
             align-items: center;
             justify-content: center;
             font-weight: 900;
             font-size: 1.75rem;
             box-shadow: 0 6px 20px rgba(139, 92, 246, 0.35);
             border: 3px solid rgba(255, 255, 255, 0.3);
             flex-shrink: 0;
         }
 
         .review-info {
             flex: 1;
         }
 
         .review-name {
             font-size: 1.25rem;
             font-weight: 800;
             color: var(--text-light);
             margin-bottom: 0.5rem;
         }
 
         body.dark .review-name {
             color: var(--text-dark);
         }
 
         .review-stars {
             color: #f59e0b;
             font-size: 1.25rem;
             text-shadow: 0 1px 3px rgba(245, 158, 11, 0.3);
             display: flex;
             align-items: center;
             gap: 0.25rem;
         }
 
         .review-date {
             color: var(--muted);
             font-size: 0.875rem;
             margin-top: 0.25rem;
         }
 
         .review-text {
             color: var(--muted);
             font-size: 1.05rem;
             line-height: 1.8;
             padding: 1.5rem;
             background: rgba(124, 58, 237, 0.04);
             border-radius: 1.25rem;
             border-left: 4px solid rgba(124, 58, 237, 0.3);
             position: relative;
         }
 
         .review-text::before {
             content: '"';
             position: absolute;
             top: 0.5rem;
             left: 0.75rem;
             font-size: 3.5rem;
             color: rgba(124, 58, 237, 0.12);
             font-family: serif;
             line-height: 1;
         }
 
         .reviews-empty {
             text-align: center;
             padding: 4rem 2rem;
             color: var(--muted);
         }
 
         .reviews-empty i {
             font-size: 4rem;
             margin-bottom: 1rem;
             opacity: 0.3;
         }
 
         @media (max-width: 1024px) {
             .header-content {
                 flex-wrap: nowrap;
                 align-items: center;
                 gap: 0.75rem;
             }

             .header-actions {
                 margin-left: auto;
                 gap: 0.5rem;
             }

             .mobile-menu-btn {
                 display: block;
             }

             .hero {
                 padding: 7rem 0 2.5rem;
             }

             .hero .filters {
                 gap: 0.75rem;
             }

             .hero .filters .filter-chip {
                 padding: 0.65rem 1.5rem;
             }

             .courses-grid {
                 grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
             }
         }

         @media (max-width: 768px) {
             html { font-size: 15px; }
             .logo { gap: 0.75rem; }
             .hero { padding: 6rem 0 2rem; }
             .hero h1 { font-size: clamp(2rem, 6.5vw, 3rem); }
             .hero-sub { font-size: 1.05rem; margin-bottom: 1.75rem; }
             .filters { flex-direction: column; gap: 0.75rem; align-items: stretch; }
             .filters .filter-chip { width: 100%; justify-content: center; }
             .courses-grid { grid-template-columns: minmax(0, 1fr); gap: 1.75rem; }
             .course-card { max-width: 100%; }
             .course-card .course-body { padding: 1.5rem; }
             .pricing-table { grid-template-columns: minmax(0, 1fr); }
             .reviews-grid { grid-template-columns: minmax(0, 1fr); }
             .reviews-nav { flex-wrap: wrap; justify-content: center; }
             .mentor-card { flex-direction: column; align-items: flex-start; text-align: left; }
             .mentor-avatar { width: 120px; height: 120px; margin-bottom: 1rem; }
             .modal-content { border-radius: 1.75rem; }
         }

         @media (max-width: 640px) {
             .modal-content { border-radius: 1.5rem; max-height: 95vh; }
             .modal-header { padding: 1.5rem; }
             .modal-title { font-size: 1.5rem; }
             .reviews-body { padding: 1.25rem; gap: 1rem; }
             .review-item { padding: 1.25rem; }
             .review-avatar { width: 56px; height: 56px; font-size: 1.5rem; }
             .course-image { height: 200px; }
             .course-image i { font-size: 6rem; }
             .course-meta { flex-direction: column; gap: 0.75rem; align-items: flex-start; }
             .price-row { flex-direction: column; align-items: flex-start; gap: 1rem; }
             .price { font-size: 1.75rem; }
             .controls select { width: 100%; }
             .cta-banner { padding: 1.75rem; text-align: center; }
             .cta-banner .btn { width: 100%; }
         }

         @media (max-width: 480px) {
             html { font-size: 14px; }
             .header-actions { gap: 0.5rem; }
             .auth-buttons,
             .user-actions { display: none; }
             .hero h1 { font-size: clamp(1.75rem, 8vw, 2.5rem); }
             .hero p { font-size: 1rem; }
             .filters .filter-chip { font-size: 0.95rem; padding: 0.6rem 1.25rem; }
             .course-card { padding: 1.5rem; }
             .course-body .rating-row { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
             .reviews-nav { width: 100%; }
             .reviews-nav .filter-chip { flex: 1; text-align: center; }
             .mentor-list { gap: 1.5rem; }
             .mentor-card { padding: 1.5rem; }
             .faq-item { padding: 1.5rem; }
         }

        .auth-modal {
            background: rgba(15, 23, 42, 0.78);
            padding: 1rem;
        }

        .auth-modal::before {
            display: none;
        }

        .auth-modal .modal-content {
            padding: 2.5rem;
            max-width: min(430px, calc(100vw - 2rem));
            width: 100%;
            border-radius: 1.5rem;
            border: 1px solid rgba(124, 58, 237, 0.14);
            box-shadow: 0 30px 70px rgba(15, 23, 42, 0.35);
            transform: translateY(24px);
            transition: transform 0.35s ease, box-shadow 0.35s ease;
        }

        .auth-modal.active .modal-content {
            transform: translateY(0);
        }

        body.dark .auth-modal .modal-content {
            background: linear-gradient(160deg, rgba(17, 24, 39, 0.98), rgba(30, 41, 59, 0.94));
            border-color: rgba(139, 92, 246, 0.25);
            box-shadow: 0 28px 70px rgba(2, 6, 23, 0.6);
        }

        .auth-modal .modal-header {
            padding: 0;
            border: none;
            background: transparent;
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-modal .modal-close {
            position: absolute;
            top: 1.25rem;
            right: 1.25rem;
            background: rgba(148, 163, 184, 0.18);
            border: none;
            width: 2.5rem;
            height: 2.5rem;
            color: var(--text-light);
            border-radius: 999px;
            font-size: 1rem;
            display: grid;
            place-items: center;
            transition: all 0.2s ease;
        }

        body.dark .auth-modal .modal-close {
            background: rgba(148, 163, 184, 0.12);
            color: #e2e8f0;
        }

        .auth-modal .modal-close:hover {
            background: rgba(59, 130, 246, 0.22);
            transform: translateY(-1px);
        }

        body.dark .auth-modal .modal-close:hover {
            background: rgba(59, 130, 246, 0.32);
        }

        .auth-modal .modal-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.35rem 0.85rem;
            border-radius: 999px;
            background: rgba(59, 130, 246, 0.12);
            color: #2563eb;
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }

        body.dark .auth-modal .modal-badge {
            background: rgba(59, 130, 246, 0.18);
            color: #93c5fd;
        }

        .auth-modal .modal-title {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-light);
            margin-bottom: 0.75rem;
        }

        .auth-modal .modal-subtitle {
            color: var(--muted);
            font-size: 1rem;
        }

        body.dark .auth-modal .modal-subtitle {
            color: rgba(203, 213, 225, 0.9);
        }

        .auth-modal .modal-benefits {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        .auth-modal .modal-benefit {
            flex: 1 1 150px;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            background: rgba(79, 70, 229, 0.08);
            color: var(--muted);
        }

        body.dark .auth-modal .modal-benefit {
            background: rgba(79, 70, 229, 0.18);
            color: rgba(226, 232, 240, 0.9);
        }

        .auth-modal .modal-benefit i {
            color: #6366f1;
            font-size: 1rem;
        }

        body.dark .auth-modal .modal-benefit i {
            color: #a5b4fc;
        }

        .auth-modal .modal-form {
            display: grid;
            gap: 1.25rem;
        }

        .auth-modal .form-group {
            display: grid;
            gap: 0.6rem;
        }

        .auth-modal .form-label {
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--text-light);
        }

        body.dark .auth-modal .form-label {
            color: #e2e8f0;
        }

        .auth-modal .form-label::after {
            display: none;
        }

        .auth-modal .form-input {
            width: 100%;
            padding: 0.95rem 1.1rem;
            border-radius: 0.9rem;
            border: 1px solid rgba(148, 163, 184, 0.45);
            background: rgba(255, 255, 255, 0.9);
            color: var(--text-light);
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        body.dark .auth-modal .form-input {
            background: rgba(17, 24, 39, 0.95);
            border-color: rgba(148, 163, 184, 0.28);
            color: #f8fafc;
        }

        .auth-modal .form-input:focus {
            outline: none;
            border-color: #7c3aed;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.18);
        }

        body.dark .auth-modal .form-input:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.25);
        }

        .auth-modal .form-extra {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: var(--muted);
            gap: 1rem;
        }

        .auth-modal .form-remember {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: inherit;
        }

        .auth-modal .form-remember input {
            width: 1rem;
            height: 1rem;
            accent-color: #7c3aed;
        }

        .auth-modal .form-extra a {
            color: #3b82f6;
            font-weight: 600;
            text-decoration: none;
        }

        .auth-modal .modal-submit {
            width: 100%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            font-size: 1rem;
        }

        .auth-modal .modal-note {
            margin-top: 1.25rem;
            text-align: center;
            font-size: 0.9rem;
            color: var(--muted);
        }

        .auth-modal .modal-note i {
            margin-right: 0.35rem;
            color: #10b981;
        }

        .auth-modal .modal-switch {
            margin-top: 1.75rem;
            text-align: center;
            font-size: 0.95rem;
            color: var(--muted);
        }

        .auth-modal .modal-switch a {
            color: #7c3aed;
            font-weight: 600;
        }

        .auth-modal .modal-switch a:hover {
            color: #4f46e5;
        }

        @media (max-width: 480px) {
            .auth-modal .modal-content {
                padding: 2.25rem 1.75rem;
            }

            .auth-modal .modal-benefits {
                flex-direction: column;
            }

            .auth-modal .form-extra {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        /* ===== ENHANCED FOOTER ===== */
        .footer {
            background: linear-gradient(135deg, var(--dark-wood), var(--light-wood));
            position: relative;
            overflow: hidden;
            margin-top: 4rem;
            padding: 0;
        }

        .footer::before {
            content: '';
            position: absolute;
            inset: 0;
            background: 
                linear-gradient(45deg, var(--board-light) 25%, transparent 25%),
                linear-gradient(-45deg, var(--board-light) 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, var(--board-light) 75%),
                linear-gradient(-45deg, transparent 75%, var(--board-light) 75%);
            background-size: 60px 60px;
            background-position: 0 0, 0 30px, 30px -30px, -30px 0px;
            opacity: 0.05;
        }

        .footer-top {
            background: linear-gradient(180deg, rgba(0,0,0,0.3), transparent);
            padding: 1rem 0;
            border-bottom: 3px solid rgba(255, 215, 0, 0.3);
        }

        .footer-ornament {
            display: flex;
            justify-content: center;
            gap: 2rem;
            font-size: 2rem;
            opacity: 0.6;
        }

        .footer-ornament span {
            animation: float 3s ease-in-out infinite;
        }

        .footer-ornament span:nth-child(1) { animation-delay: 0s; }
        .footer-ornament span:nth-child(2) { animation-delay: 0.5s; }
        .footer-ornament span:nth-child(3) { animation-delay: 1s; }
        .footer-ornament span:nth-child(4) { animation-delay: 1.5s; }
        .footer-ornament span:nth-child(5) { animation-delay: 2s; }
        .footer-ornament span:nth-child(6) { animation-delay: 2.5s; }

        .footer-content {
            position: relative;
            z-index: 2;
            padding: 4rem 0 2rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        @media (min-width: 768px) {
            .footer-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .footer-grid {
                grid-template-columns: 2fr 1fr 1fr 1fr;
            }
        }

        .footer-brand {
            max-width: 400px;
        }

        .footer-brand h3 {
            color: #ffd700;
            margin-bottom: 1rem;
            font-size: 1.75rem;
            text-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
        }

        .footer-brand p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.7;
        }

        .footer-section h4 {
            color: #ffd700;
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
            text-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.75rem;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s;
            display: inline-block;
        }

        .footer-links a:hover {
            color: #ffd700;
            padding-left: 0.5rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .social-link {
            width: 3.5rem;
            height: 3.5rem;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: var(--dark-wood);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
            font-size: 1.25rem;
        }

        .social-link:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
            background: linear-gradient(135deg, #ffed4e, #ffd700);
        }

        .footer-bottom {
            border-top: 2px solid rgba(255, 215, 0, 0.2);
            padding: 2rem 0;
            background: linear-gradient(180deg, transparent, rgba(0,0,0,0.3));
        }

        .footer-bottom-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            text-align: center;
        }

        @media (min-width: 768px) {
            .footer-bottom-content {
                flex-direction: row;
                justify-content: space-between;
            }
        }

        .footer-copyright {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.875rem;
        }

        .footer-badges {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .footer-badge {
            padding: 0.5rem 1rem;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 2rem;
            color: #ffd700;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .chess-piece-decoration {
            position: absolute;
            font-size: 10rem;
            opacity: 0.03;
            pointer-events: none;
        }

        .chess-piece-decoration:nth-child(1) { top: 10%; left: 5%; }
        .chess-piece-decoration:nth-child(2) { top: 50%; right: 10%; }
        .chess-piece-decoration:nth-child(3) { bottom: 10%; left: 15%; }
    </style>
    <script src="/scripts/modal-utils.js"></script>
    <script>
        // Set mode early to avoid flicker of catalog when opening /course/{id}
        (function(){
            try {
                if (/^\/course\/\d+\/?$/.test(window.location.pathname)) {
                    document.documentElement.classList.add('view-course');
                    document.body && document.body.classList.add('view-course');
                }
            } catch {}
        })();
    </script>
</head>
<body>
    <header class="header" id="header">
        <div class="container">
            <div class="header-content">
                <!-- Logo -->
                <a href="/" class="logo">
                    <div class="logo-icon">
                        <div class="chess-pattern"></div>
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" style="position: relative; z-index: 2;">
                            <defs>
                                <linearGradient id="crown" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#ffd700" />
                                    <stop offset="50%" stop-color="#ffffff" />
                                    <stop offset="100%" stop-color="#ffd700" />
                                </linearGradient>
                            </defs>
                            <rect x="3" y="16" width="18" height="3" fill="url(#crown)" stroke="#fff" stroke-width="0.5" rx="1.5"/>
                            <path d="M4 16L3 6L6 11L12 3L18 11L21 6L20 16H4Z" fill="url(#crown)" stroke="#fff" stroke-width="1"/>
                            <circle cx="12" cy="9" r="1.5" fill="#e11d48" stroke="#fff" stroke-width="0.5"/>
                        </svg>
                        <svg width="14" height="14" viewBox="0 0 12 12" fill="none" style="position: absolute; top: 0.25rem; right: 0.25rem; z-index: 3;">
                            <path d="M7 1L3 7H5L4 11L8 5H6L7 1Z" fill="#ffd700" stroke="#fff" stroke-width="0.8"/>
                        </svg>
                        <div class="logo-sparkle"></div>
                        <div class="logo-sparkle"></div>
                        <div class="logo-sparkle"></div>
                        <div class="logo-sparkle"></div>
                    </div>
                    <div>
                        <div style="font-size: 1.5rem; font-weight: 800; letter-spacing: -0.5px;" class="gradient-text">PowerChess</div>
                        <div style="font-size: 0.75rem; color: var(--muted); margin-top: -0.25rem;">♔ Шахматная академия</div>
                    </div>
                </a>

                <!-- Navigation -->
                <nav class="nav">
                    <a href="/games" class="nav-link">Играть</a>
                    <a href="/course" class="nav-link">Курсы</a>
                    <a href="/couch#coaches" class="nav-link">Тренера</a>
                    <a href="#reviews" class="nav-link">Отзывы</a>
                    <a href="#tournaments" class="nav-link">Турниры</a>
                </nav>

                <!-- Actions -->
                <div class="header-actions">
                    <!-- User Actions (Desktop) -->
                    <div class="user-actions" id="userActions" style="display: none;">
                        <button type="button" class="user-pill" id="gamesUserInfo" onclick="window.location.href='/cabinet'">
                            <i class="fas fa-user"></i>
                            <span>—</span>
                        </button>
                        <button type="button" class="btn-login logout-btn" style="display: none; margin-left: 0.5rem;">
                            <i class="fas fa-sign-out-alt" style="margin-right: 0.5rem;"></i>
                            Выйти
                        </button>
                    </div>

                    <!-- Auth Buttons (Desktop) -->
                    <div class="auth-buttons" id="authButtons">
                        <button class="btn-login" onclick="showLoginModal()">
                            <i class="fas fa-sign-in-alt" style="margin-right: 0.5rem;"></i>
                            Войти
                        </button>
                        <button class="btn-register" onclick="showRegisterModal()">
                            <i class="fas fa-user-plus" style="margin-right: 0.5rem;"></i>
                            Регистрация
                        </button>
                    </div>

                    <button class="theme-toggle" onclick="toggleTheme()" title="Переключить тему">
                        <i class="fas fa-sun" id="themeIcon"></i>
                    </button>
                    
                    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars" id="menuIcon"></i>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div class="mobile-menu" id="mobileMenu">
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <a href="/course" class="nav-link" style="display: block;" onclick="closeMobileMenu()">Курсы</a>
                    <a href="/couch#coaches" class="nav-link" style="display: block;" onclick="closeMobileMenu()">Тренера</a>
                    <a href="#reviews" class="nav-link" style="display: block;" onclick="closeMobileMenu()">Отзывы</a>
                    <a href="#tournaments" class="nav-link" style="display: block;" onclick="closeMobileMenu()">Турниры</a>
                    <hr style="border: 1px solid var(--border-light); margin: 1rem 0;">

                    <!-- Mobile User Actions -->
                    <div class="mobile-user-actions" id="mobileUserActions" style="display: none;">
                        <button type="button" class="user-pill" id="gamesUserInfoMobile" style="width: 100%; justify-content: center;" onclick="closeMobileMenu(); window.location.href='/cabinet';">
                            <i class="fas fa-user"></i>
                            <span>—</span>
                        </button>
                        <hr style="border: 1px solid var(--border-light); margin: 1rem 0;">
                        <button type="button" class="btn-login logout-btn" style="width: 100%; justify-content: center; display: none;">
                            <i class="fas fa-sign-out-alt" style="margin-right: 0.5rem;"></i>
                            Выйти
                        </button>
                    </div>

                    <div class="mobile-auth" id="mobileAuthButtons">
                        <button class="btn-login" style="width: 100%; justify-content: center;" onclick="showLoginModal(); closeMobileMenu();">Войти</button>
                        <button class="btn-register" style="width: 100%; justify-content: center;" onclick="showRegisterModal(); closeMobileMenu();">Регистрация</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero -->
        <section class="hero">
            <div class="container">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h1 class="gradient-text">Ultimate Курсы PowerChess</h1>
                    <p class="hero-sub">Выберите уровень, изучите отзывы учеников, купите и начните обучение</p>
                    <div class="filters" id="levelFilters" style="display: none;">
                        <button class="filter-chip active" data-filter="all" onclick="applyLevelFilter('all')">
                            Все уровни
                        </button>
                        <button class="filter-chip" data-filter="basic" onclick="applyLevelFilter('basic')">
                            ⭐ Начальный
                        </button>
                        <button class="filter-chip" data-filter="intermediate" onclick="applyLevelFilter('intermediate')">
                            ⭐⭐ Средний
                        </button>
                        <button class="filter-chip" data-filter="advanced" onclick="applyLevelFilter('advanced')">
                            ⭐⭐⭐ Эксперт
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Course Lessons (if opened from cabinet) -->
        <section class="container" id="course-lessons" style="padding: 2rem 0;">
            <h2 class="gradient-text" style="margin-bottom: 1rem;">Уроки курса</h2>
            <div id="lessonsList"></div>
        </section>

        <!-- Catalog -->
        <section id="catalog" class="container" style="padding-bottom: 4rem;">
            <div class="courses-grid" id="coursesGrid">
                <!-- Course 1: Basic -->
                <article class="course-card" data-level="basic">
                    <div class="course-image course-cover-basic">
                        <div class="course-level-badge">⭐ Начальный</div>
                        <i class="fas fa-chess-pawn"></i>
                    </div>
                    <div class="course-body">
                        <div>
                            <h3>Основы шахмат и первые победы</h3>
                            <p>С нуля до уверенной игры за 4 недели. Изучите все правила и начните выигрывать!</p>
                        </div>
                        
                        <div class="rating-row" onclick="openReviews('1', 'Основы шахмат и первые победы')">
                            <span class="stars">★★★★★</span>
                            <span class="rating-count">24 отзыва</span>
                            <i class="fas fa-arrow-right" style="margin-left: auto; font-size: 1rem;"></i>
                        </div>
                        
                        <div class="trainer">
                            <i class="fas fa-chalkboard-teacher"></i>
                            <span>Тренер: Илья Петров, КМС</span>
                        </div>
                        
                        <button class="reviews-btn" onclick="openReviews('1', 'Основы шахмат и первые победы')">
                            <i class="fas fa-comments"></i>
                            <span>Читать все отзывы</span>
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                        
                        <div class="price-row">
                            <div class="price" data-base-price="2990" id="price-2">2 990₽</div>
                            <div class="controls">
                                <select class="select" onchange="updatePrice('2', this.value)">
                                    <option value="basic">Стандарт</option>
                                    <option value="plus">Плюс (+35%)</option>
                                    <option value="pro">PRO (+85%)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="card-actions">
                            <button class="btn btn-primary" onclick="buyCourse('2', 'Основы шахмат и первые победы')">
                                <i class="fas fa-shopping-cart"></i> Купить курс
                            </button>
                        </div>
                    </div>
                </article>

                <!-- Course 2: Intermediate -->
                <article class="course-card" data-level="intermediate">
                    <div class="course-image course-cover-tactical">
                        <div class="course-level-badge">⭐⭐ Средний</div>
                        <i class="fas fa-chess-knight"></i>
                    </div>
                    <div class="course-body">
                        <div>
                            <h3>Тактика и средняя игра</h3>
                            <p>Комбинации, расчёт вариантов, планы. Поднимите свою игру на новый уровень!</p>
                        </div>
                        
                        <div class="rating-row" onclick="openReviews('2', 'Тактика и средняя игра')">
                            <span class="stars">★★★★★</span>
                            <span class="rating-count">31 отзыв</span>
                            <i class="fas fa-arrow-right" style="margin-left: auto; font-size: 1rem;"></i>
                        </div>
                        
                        <div class="trainer">
                            <i class="fas fa-chess-knight"></i>
                            <span>Тренер: Анна Орлова, Мастер FIDE</span>
                        </div>
                        
                        <button class="reviews-btn" onclick="openReviews('2', 'Тактика и средняя игра')">
                            <i class="fas fa-comments"></i>
                            <span>Читать все отзывы</span>
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                        
                        <div class="price-row">
                            <div class="price" data-base-price="4990" id="price-3">4 990₽</div>
                            <div class="controls">
                                <select class="select" onchange="updatePrice('3', this.value)">
                                    <option value="basic">Стандарт</option>
                                    <option value="plus">Плюс (+35%)</option>
                                    <option value="pro">PRO (+85%)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="card-actions">
                            <button class="btn btn-primary" onclick="buyCourse('3', 'Тактика и средняя игра')">
                                <i class="fas fa-shopping-cart"></i> Купить курс
                            </button>
                        </div>
                    </div>
                </article>

                <!-- Course 3: Advanced -->
                <article class="course-card" data-level="advanced">
                    <div class="course-image course-cover-master">
                        <div class="course-level-badge">⭐⭐⭐ Эксперт</div>
                        <i class="fas fa-chess-king"></i>
                    </div>
                    <div class="course-body">
                        <div>
                            <h3>Дебютная подготовка против AI</h3>
                            <p>Глубокие идеи, анализ, новинки. Станьте экспертом в дебютной теории!</p>
                        </div>
                        
                        <div class="rating-row" onclick="openReviews('3', 'Дебютная подготовка против AI')">
                            <span class="stars">★★★★★</span>
                            <span class="rating-count">12 отзывов</span>
                            <i class="fas fa-arrow-right" style="margin-left: auto; font-size: 1rem;"></i>
                        </div>
                        
                        <div class="trainer">
                            <i class="fas fa-crown"></i>
                            <span>Тренер: ГМ Павел Смирнов</span>
                        </div>
                        
                        <button class="reviews-btn" onclick="openReviews('3', 'Дебютная подготовка против AI')">
                            <i class="fas fa-comments"></i>
                            <span>Читать все отзывы</span>
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                        
                        <div class="price-row">
                            <div class="price" data-base-price="7990" id="price-4">7 990₽</div>
                            <div class="controls">
                                <select class="select" onchange="updatePrice('4', this.value)">
                                    <option value="basic">Стандарт</option>
                                    <option value="plus">Плюс (+35%)</option>
                                    <option value="pro">PRO (+85%)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="card-actions">
                            <button class="btn btn-primary" onclick="buyCourse('4', 'Дебютная подготовка против AI')">
                                <i class="fas fa-shopping-cart"></i> Купить курс
                            </button>
                        </div>
                    </div>
                </article>
            </div>
        </section>
    </main>

    <!-- Reviews Modal -->
    <div class="modal" id="reviewsModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" onclick="closeReviewsModal()">
                    <i class="fas fa-times"></i>
                </button>
                <h3 id="reviewsModalTitle">Отзывы о курсе</h3>
                <p style="color: var(--muted); margin-top: 0.5rem;">Читайте опыт наших учеников</p>
                
                <div class="reviews-filters">
                    <button class="filter-chip active" onclick="filterReviews(0)">Все отзывы</button>
                    <button class="filter-chip" onclick="filterReviews(5)">5 звёзд</button>
                    <button class="filter-chip" onclick="filterReviews(4)">4 звезды</button>
                    <button class="filter-chip" onclick="filterReviews(3)">3 звезды</button>
                </div>
            </div>
            
            <div class="reviews-body">
                <div class="reviews-list" id="reviewsList"></div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal auth-modal" id="loginModal">
        <div class="modal-content">
            <button class="modal-close" type="button" onclick="closeModal('loginModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <span class="modal-badge">
                    <i class="fas fa-chess-knight"></i>
                    PowerChess
                </span>
                <h3 class="modal-title">Войти</h3>
                <p class="modal-subtitle">Следите за покупками и продолжайте обучение с того же места.</p>
            </div>
            <form class="modal-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label" for="courseLoginEmail">Email</label>
                    <input id="courseLoginEmail" type="email" class="form-input" placeholder="name@email.ru" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="courseLoginPassword">Пароль</label>
                    <input id="courseLoginPassword" type="password" class="form-input" placeholder="Введите пароль" required>
                </div>
                <div class="form-extra">
                    <a href="mailto:support@power-chess.ru">Забыли пароль?</a>
                </div>
                <button class="btn btn-primary modal-submit" type="submit">
                    <i class="fas fa-sign-in-alt"></i>
                    Войти
                </button>
            </form>
            <p class="modal-switch">
                Нет аккаунта?
                <a href="#" onclick="closeModal('loginModal'); showModal('registerModal'); return false;">Зарегистрироваться</a>
            </p>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal auth-modal" id="registerModal">
        <div class="modal-content">
            <button class="modal-close" type="button" onclick="closeModal('registerModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <span class="modal-badge">
                    <i class="fas fa-chess-knight"></i>
                    PowerChess
                </span>
                <h3 class="modal-title">Создать аккаунт</h3>
                <p class="modal-subtitle">Откройте доступ к закрытым курсам и персональным рекомендациям.</p>
            </div>
            <form class="modal-form" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label class="form-label" for="courseRegisterUsername">Имя пользователя</label>
                    <input id="courseRegisterUsername" name="username" type="text" class="form-input" placeholder="например knight_master" pattern="^[A-Za-z0-9_.-]{3,32}$" title="3-32 символа: латиница, цифры, _ . -" autocomplete="username" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="courseRegisterEmail">Email</label>
                    <input id="courseRegisterEmail" name="email" type="email" class="form-input" placeholder="name@email.ru" autocomplete="email" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="courseRegisterPassword">Пароль</label>
                    <input id="courseRegisterPassword" name="password" type="password" class="form-input" placeholder="Придумайте пароль" autocomplete="new-password" required>
                </div>
                <button class="btn btn-success modal-submit" type="submit">
                    <i class="fas fa-user-plus"></i>
                    Создать аккаунт
                </button>
            </form>
            <p class="modal-note">
                <i class="fas fa-lock"></i>
                Мы защищаем ваши данные и используем их только для обучения.
            </p>
            <p class="modal-switch">
                Уже есть аккаунт?
                <a href="#" onclick="closeModal('registerModal'); showModal('loginModal'); return false;">Войти</a>
            </p>
        </div>
    </div>

    <script>
        // Mock reviews data with more detailed reviews
        const reviewsData = {
            '1': [
                { name: 'Артём Волков', stars: 5, text: 'Отличный старт в мир шахмат! Всё понятно объяснено, много практических занятий. За месяц научился играть уверенно и даже выиграл свой первый турнир среди друзей. Илья - отличный тренер, который умеет объяснить сложные вещи простым языком. Рекомендую всем начинающим!', date: '15 января 2024' },
                { name: 'Светлана Иванова', stars: 5, text: 'Очень помогает систематизировать знания. Тренер объясняет доступно и интересно. Особенно понравились видео-разборы партий и домашние задания. Чувствую, что делаю реальный прогресс с каждым уроком!', date: '10 января 2024' },
                { name: 'Дмитрий Соколов', stars: 4, text: 'Хороший курс для начинающих. Немного медленный темп, но это даже хорошо для освоения основ. Материал структурирован логично, есть все необходимое для старта. Единственное - хотелось бы больше live-занятий с тренером.', date: '5 января 2024' },
                { name: 'Елена Петрова', stars: 5, text: 'Мой сын (10 лет) в восторге от курса! Наконец-то начал проявлять интерес к шахматам. Тренер умеет найти подход к детям, объясняет интересно и не скучно.', date: '28 декабря 2023' },
                { name: 'Максим Кузнецов', stars: 5, text: 'Превзошёл все мои ожидания! Думал, что в 45 лет уже поздно учиться шахматам, но курс доказал обратное. Всё очень доступно и понятно. Спасибо!', date: '20 декабря 2023' }
            ],
            '2': [
                { name: 'Денис Морозов', stars: 5, text: 'Тактика объяснена на высшем уровне! Мой рейтинг вырос на 200 пунктов за два месяца. Курс полностью изменил моё понимание шахмат. Анна разбирает сложные позиции так, что всё становится кристально ясным. Каждый урок - это открытие новых горизонтов!', date: '18 января 2024' },
                { name: 'Мария Петрова', stars: 5, text: 'Много практики и разборов партий. Анна - отличный тренер! Особенно ценю индивидуальный подход и конструктивную критику моих партий. Результаты не заставили себя ждать - начала выигрывать в клубных турнирах!', date: '12 января 2024' },
                { name: 'Алексей Новиков', stars: 4, text: 'Очень полезный курс, но хотелось бы больше live-занятий. В целом материал отличный, много тактических упражнений. Видно, что тренер вкладывает душу в каждый урок.', date: '8 января 2024' },
                { name: 'Ольга Смирнова', stars: 5, text: 'Лучший курс по тактике, который я проходила! Всё структурировано, от простого к сложному. После курса чувствую себя намного увереннее в расчёте вариантов.', date: '30 декабря 2023' },
                { name: 'Игорь Васильев', stars: 4, text: 'Хороший курс с качественным контентом. Немного не хватает материала по эндшпилю, но тактическая часть на высоте!', date: '22 декабря 2023' }
            ],
            '3': [
                { name: 'Олег Кузнецов', stars: 5, text: 'Сильные идеи, которые пригодились мне на турнире. Павел - настоящий профессионал! Его анализ дебютов с помощью AI открыл мне глаза на современную шахматную теорию. Курс стоит каждого рубля. Уже выиграл два турнира благодаря новым знаниям!', date: '22 января 2024' },
                { name: 'Ирина Смирнова', stars: 5, text: 'Очень глубокий анализ. Наконец-то понимаю, что делать в дебюте! Павел объясняет не просто ходы, а идеи, стоящие за ними. Это совершенно другой уровень понимания шахмат. Курс изменил мою игру кардинально!', date: '16 января 2024' },
                { name: 'Виктор Попов', stars: 4, text: 'Сложно, но невероятно полезно. Требует серьёзной подготовки и базовых знаний. Если вы готовы усердно работать - результат будет впечатляющим. Некоторые темы приходилось пересматривать по 2-3 раза, но оно того стоит!', date: '10 января 2024' },
                { name: 'Сергей Лебедев', stars: 5, text: 'Гроссмейстерский уровень подачи материала! Павел показывает дебюты на таком глубоком уровне, что даже топ-движки не всегда согласны. Это настоящая школа профессионального мастерства!', date: '3 января 2024' },
                { name: 'Андрей Козлов', stars: 5, text: 'Лучший курс по дебютам! После его прохождения чувствую себя уверенно против любого дебюта. Анализ с помощью AI даёт огромное преимущество в понимании позиции.', date: '27 декабря 2023' }
            ]
        };

        let currentCourseId = '';
        let currentFilterStars = 0;

        // Theme management
        let isDark = false;
        function toggleTheme() {
            isDark = !isDark;
            document.body.classList.toggle('dark', isDark);
            document.getElementById('themeIcon').className = isDark ? 'fas fa-moon' : 'fas fa-sun';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        function loadTheme() {
            const saved = localStorage.getItem('theme');
            if (saved === 'dark') {
                isDark = true;
                document.body.classList.add('dark');
                document.getElementById('themeIcon').className = 'fas fa-moon';
            }
        }

        // Header scroll effect
        function handleScroll() {
            const header = document.getElementById('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        }

        // Filter courses by level
        function applyLevelFilter(level) {
            document.querySelectorAll('#levelFilters .filter-chip').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-filter="${level}"]`).classList.add('active');

            document.querySelectorAll('.course-card').forEach(card => {
                if (level === 'all' || card.dataset.level === level) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Open reviews modal
        function openReviews(courseId, courseName) {
            currentCourseId = courseId;
            currentFilterStars = 0;
            document.getElementById('reviewsModalTitle').textContent = `Отзывы: ${courseName}`;
            renderReviews();
            showModal('reviewsModal');
        }

        // Close reviews modal
        function closeReviewsModal() {
            closeModal('reviewsModal');
        }

        // Filter reviews by stars
        function filterReviews(stars) {
            currentFilterStars = stars;
            document.querySelectorAll('.reviews-filters .filter-chip').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            renderReviews();
        }

        // Render reviews in modal
        function renderReviews() {
            const container = document.getElementById('reviewsList');
            const reviews = reviewsData[currentCourseId] || [];
            
            const filteredReviews = currentFilterStars === 0 
                ? reviews 
                : reviews.filter(r => r.stars === currentFilterStars);

            if (filteredReviews.length === 0) {
                container.innerHTML = `
                    <div class="reviews-empty">
                        <i class="fas fa-comments"></i>
                        <p>Отзывов с таким рейтингом пока нет</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filteredReviews.map(review => {
                const initial = review.name.charAt(0);
                const starsHTML = '★'.repeat(review.stars) + '☆'.repeat(5 - review.stars);
                
                return `
                    <div class="review-item">
                        <div class="review-header">
                            <div class="review-avatar">${initial}</div>
                            <div class="review-info">
                                <div class="review-name">${review.name}</div>
                                <div class="review-stars">${starsHTML}</div>
                                <div class="review-date">
                                    <i class="fas fa-calendar-alt"></i> ${review.date}
                                </div>
                            </div>
                        </div>
                        <div class="review-text">${review.text}</div>
                    </div>
                `;
            }).join('');
        }

        // Update price based on package
        const priceMultipliers = { basic: 1, plus: 1.35, pro: 1.85 };
        function updatePrice(courseId, packageType) {
            const priceEl = document.getElementById(`price-${courseId}`);
            const basePrice = parseInt(priceEl.dataset.basePrice);
            const newPrice = Math.round(basePrice * priceMultipliers[packageType]);
            priceEl.textContent = new Intl.NumberFormat('ru-RU').format(newPrice) + '₽';
        }

        // Purchase flow
        async function checkoutAndRedirect(courseId) {
            try {
                const resp = await apiFetch(`/api/payments/checkout/${courseId}`, { method: 'POST' });
                if (resp.status === 401 || resp.status === 403) {
                    showLoginModal();
                    return;
                }
                if (!resp.ok) {
                    let detail = 'Ошибка при создании оплаты';
                    try { const data = await resp.json(); detail = data.detail || detail; } catch {}
                    alert(detail);
                    return;
                }
                const data = await resp.json();
                const url = data.payment_url;
                if (url && typeof url === 'string') {
                    if (url.startsWith('/api/payments/simulate/')) {
                        // Dev mode: simulate then go to cabinet
                        await apiFetch(url);
                        window.location.href = '/cabinet';
                    } else {
                        window.location.href = url;
                    }
                } else {
                    // Free course path
                    window.location.href = '/cabinet';
                }
            } catch (e) {
                alert('Сетевая ошибка при переходе к оплате');
            }
        }

        function buyCourse(courseId, courseName) {
            // сразу к оплате без дополнительных модалок
            checkoutAndRedirect(courseId);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const icon = document.getElementById('menuIcon');
            if (!menu) return;
            const active = menu.classList.toggle('active');
            if (icon) icon.className = active ? 'fas fa-times' : 'fas fa-bars';
        }

        function closeMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const icon = document.getElementById('menuIcon');
            if (menu) menu.classList.remove('active');
            if (icon) icon.className = 'fas fa-bars';
        }

        // Close modal / mobile menu on backdrop click
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('mobileMenu');
            const trigger = document.querySelector('.mobile-menu-btn');
            if (menu && menu.classList.contains('active')) {
                if (!(menu.contains(e.target) || trigger && trigger.contains(e.target))) {
                    closeMobileMenu();
                }
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                if (typeof closeModal === 'function') {
                    closeModal();
                }
                closeMobileMenu();
            }
        });

        // Initialize on load
        window.addEventListener('scroll', handleScroll, { passive: true });
        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            applyLevelFilter('all');

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href && href.length > 1) {
                        const target = document.querySelector(href);
                        if (target) {
                            e.preventDefault();
                            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            closeMobileMenu();
                        }
                    }
                });
            });

            try {
                const params = new URLSearchParams(window.location.search);
                if (params.get('courseId')) {
                    const catalog = document.getElementById('catalog');
                    if (catalog) catalog.style.display = 'none';
                }
            } catch {}
        });

        window.addEventListener('resize', () => {
            if (window.innerWidth >= 1024) closeMobileMenu();
        });

        // Include common auth functions
        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
        });
    </script>

    <!-- Enhanced Footer -->
    <footer class="footer">
        <!-- Chess Decorations -->
        <div class="chess-piece-decoration">♔</div>
        <div class="chess-piece-decoration">♛</div>
        <div class="chess-piece-decoration">♜</div>

        <!-- Footer Top Ornament -->
        <div class="footer-top">
            <div class="footer-ornament">
                <span>♔</span>
                <span>♕</span>
                <span>♖</span>
                <span>♗</span>
                <span>♘</span>
                <span>♙</span>
            </div>
        </div>

        <!-- Footer Content -->
        <div class="footer-content">
            <div class="container">
                <div class="footer-grid">
                    <!-- Brand -->
                    <div class="footer-brand">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                            <div class="logo-icon" style="width: 3.5rem; height: 3.5rem;">
                                <div class="chess-pattern"></div>
                                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" style="position: relative; z-index: 2;">
                                    <defs>
                                        <linearGradient id="footerCrown" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" stop-color="#ffd700"/>
                                            <stop offset="50%" stop-color="#ffffff"/>
                                            <stop offset="100%" stop-color="#ffd700"/>
                                        </linearGradient>
                                    </defs>
                                    <rect x="3" y="16" width="18" height="3" fill="url(#footerCrown)" stroke="#fff" stroke-width="0.5" rx="1.5"/>
                                    <path d="M4 16L3 6L6 11L12 3L18 11L21 6L20 16H4Z" fill="url(#footerCrown)" stroke="#fff" stroke-width="1"/>
                                    <circle cx="12" cy="9" r="1.5" fill="#e11d48" stroke="#fff" stroke-width="0.5"/>
                                </svg>
                                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" style="position: absolute; top: 0.2rem; right: 0.2rem; z-index: 3;">
                                    <path d="M6 1L2 6H4L3 9L7 4H5L6 1Z" fill="#ffd700" stroke="#fff" stroke-width="0.6"/>
                                </svg>
                                <div class="logo-sparkle" style="top: 0.4rem; left: 0.4rem; width: 0.4rem; height: 0.4rem;"></div>
                                <div class="logo-sparkle" style="top: 0.4rem; right: 0.4rem; width: 0.4rem; height: 0.4rem;"></div>
                                <div class="logo-sparkle" style="bottom: 0.4rem; left: 0.4rem; width: 0.4rem; height: 0.4rem;"></div>
                                <div class="logo-sparkle" style="bottom: 0.4rem; right: 0.4rem; width: 0.4rem; height: 0.4rem;"></div>
                            </div>
                        </div>
                        <h3>PowerChess</h3>
                        <p>
                            Революционная AI-платформа для изучения шахмат. Станьте мастером быстрее с PowerChess! 
                            Объединяем классическую шахматную мудрость с современными технологиями.
                        </p>
                        <div class="social-links">
                            <a href="#" class="social-link" title="Telegram">
                                <i class="fab fa-telegram"></i>
                            </a>
                            <a href="#" class="social-link" title="YouTube">
                                <i class="fab fa-youtube"></i>
                            </a>
                            <a href="#" class="social-link" title="VK">
                                <i class="fab fa-vk"></i>
                            </a>
                            <a href="#" class="social-link" title="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Links Column 1 -->
                    <div class="footer-section">
                        <h4>Обучение</h4>
                        <ul class="footer-links">
                            <li><a href="/course">♟ Курсы</a></li>
                            <li><a href="#free">♟ Бесплатные уроки</a></li>
                            <li><a href="#masterclass">♟ Мастер-классы</a></li>
                            <li><a href="#ai-analysis">♟ AI-анализ</a></li>
                        </ul>
                    </div>

                    <!-- Links Column 2 -->
                    <div class="footer-section">
                        <h4>Сообщество</h4>
                        <ul class="footer-links">
                            <li><a href="#tournaments">♟ Турниры</a></li>
                            <li><a href="#forum">♟ Форум</a></li>
                            <li><a href="#rating">♟ Рейтинг</a></li>
                            <li><a href="#coaches">♟ Тренеры</a></li>
                        </ul>
                    </div>

                    <!-- Links Column 3 -->
                    <div class="footer-section">
                        <h4>Поддержка</h4>
                        <ul class="footer-links">
                            <li><a href="#help">♟ Справка</a></li>
                            <li><a href="#contact">♟ Контакты</a></li>
                            <li><a href="#privacy">♟ Конфиденциальность</a></li>
                            <li><a href="#terms">♟ Условия</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <div class="container">
                <div class="footer-bottom-content">
                    <div class="footer-copyright">
                        &copy; 2024 PowerChess. Все права защищены. Создано с ♔ для шахматистов.
                    </div>
                    <div class="footer-badges">
                        <div class="footer-badge">
                            <i class="fas fa-shield-alt" style="margin-right: 0.25rem;"></i>
                            Безопасная оплата
                        </div>
                        <div class="footer-badge">
                            <i class="fas fa-certificate" style="margin-right: 0.25rem;"></i>
                            Сертифицированные курсы
                        </div>
                        <div class="footer-badge">
                            <i class="fas fa-award" style="margin-right: 0.25rem;"></i>
                            Эксперты с титулами
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Common Auth Script -->
    <script src="/scripts/auth.js"></script>
    <!-- Course Page Script -->
    <script src="/scripts/course.js"></script>
</body>
</html>
