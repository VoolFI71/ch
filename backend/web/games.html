<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerChess ‚Äî –ò–≥—Ä–∞—Ç—å</title>
    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –º–µ—Ä—Ü–∞–Ω–∏—è -->
    <script>
      try {
        if (localStorage.getItem('theme') === 'dark') {
          document.documentElement.classList.add('dark');
          document.body.classList.add('dark');
        }
      } catch {}
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Common Styles -->
    <link rel="stylesheet" href="/styles/variables.css">
    <link rel="stylesheet" href="/styles/common.css">
    <link rel="stylesheet" href="/styles/header.css">
    <link rel="stylesheet" href="/styles/games.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">
                    <div class="logo-icon">
                        <div class="chess-pattern"></div>
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                            <defs>
                                <linearGradient id="crown-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#ffd700" />
                                    <stop offset="50%" stop-color="#ffffff" />
                                    <stop offset="100%" stop-color="#ffd700" />
                                </linearGradient>
                            </defs>
                            <rect x="3" y="16" width="18" height="3" fill="url(#crown-gradient)" stroke="#fff" stroke-width="0.5" rx="1.5"/>
                            <path d="M4 16L3 6L6 11L12 3L18 11L21 6L20 16H4Z" fill="url(#crown-gradient)" stroke="#fff" stroke-width="1"/>
                            <circle cx="12" cy="9" r="1.5" fill="#e11d48" stroke="#fff" stroke-width="0.5"/>
                        </svg>
                        <svg width="14" height="14" viewBox="0 0 12 12" fill="none">
                            <path d="M7 1L3 7H5L4 11L8 5H6L7 1Z" fill="#ffd700" stroke="#fff" stroke-width="0.8"/>
                        </svg>
                    </div>
                    <div>
                        <div class="gradient-text">PowerChess</div>
                        <div>‚ôî –®–∞—Ö–º–∞—Ç–Ω–∞—è –∞–∫–∞–¥–µ–º–∏—è</div>
                    </div>
                </a>
                <nav class="nav">
                    <a href="/games" class="nav-link active">–ò–≥—Ä–∞—Ç—å</a>
                    <a href="/course" class="nav-link">–ö—É—Ä—Å—ã</a>
                    <a href="/couch" class="nav-link">–¢—Ä–µ–Ω–µ—Ä—ã</a>
                    <a href="#reviews" class="nav-link">–û—Ç–∑—ã–≤—ã</a>
                    <a href="#tournaments" class="nav-link">–¢—É—Ä–Ω–∏—Ä—ã</a>
                </nav>
                <div class="header-actions">
                    <div id="authButtons">
                        <button class="btn-login" id="gamesLoginBtn">
                            <i class="fas fa-sign-in-alt"></i>
                            –í–æ–π—Ç–∏
                        </button>
                        <button class="btn-register" id="gamesRegisterBtn">
                            <i class="fas fa-user-plus"></i>
                            –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                        </button>
                    </div>
                    <div id="userActions">
                        <div id="gamesUserInfo">
                            <span></span>
                        </div>
                    </div>
                    <button class="theme-toggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" id="themeToggleBtn">
                        <i class="fas fa-sun" id="themeIcon"></i>
                    </button>
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars" id="menuIcon"></i>
                    </button>
                    <button class="btn btn-outline logout-btn" id="gamesLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
            <!-- Mobile Menu -->
            <div class="mobile-menu" id="mobileMenu">
                <div>
                    <a href="/games" class="nav-link mobile-nav-link">–ò–≥—Ä–∞—Ç—å</a>
                    <a href="/course" class="nav-link mobile-nav-link">–ö—É—Ä—Å—ã</a>
                    <a href="/couch" class="nav-link mobile-nav-link">–¢—Ä–µ–Ω–µ—Ä—ã</a>
                    <a href="#reviews" class="nav-link mobile-nav-link">–û—Ç–∑—ã–≤—ã</a>
                    <a href="#tournaments" class="nav-link mobile-nav-link">–¢—É—Ä–Ω–∏—Ä—ã</a>
                    <hr>
                    <div id="mobileAuthButtons">
                        <button class="btn-login" id="gamesLoginBtnMobile">
                            <i class="fas fa-sign-in-alt"></i>
                            –í–æ–π—Ç–∏
                        </button>
                        <button class="btn-register" id="gamesRegisterBtnMobile">
                            <i class="fas fa-user-plus"></i>
                            –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                        </button>
                    </div>
                    <div id="mobileUserActions">
                        <div id="gamesUserInfoMobile">
                            <span></span>
                        </div>
                        <button class="btn btn-outline logout-btn" id="gamesLogoutBtnMobile">
                            <i class="fas fa-sign-out-alt"></i>
                            –í—ã–π—Ç–∏
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- TABS -->
    <div class="tabs">
        <div class="container">
            <div class="tabs-container">
                <button class="tab active" data-tab="quick">
                    <i class="fas fa-bolt"></i> –ë—ã—Å—Ç—Ä–∞—è –∏–≥—Ä–∞
                </button>
                <button class="tab" data-tab="lobby">
                    <i class="fas fa-users"></i> –ó–∞–ª –æ–∂–∏–¥–∞–Ω–∏—è
                </button>
                <button class="tab" data-tab="tv">
                    <i class="fas fa-tv"></i> TV
                </button>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <div class="container">
            <!-- QUICK GAME TAB -->
            <div class="tab-content" id="quick-tab">
                <div class="content-grid">
                    <div class="game-modes">
                        <h2 class="section-title">
                            <i class="fas fa-clock"></i>
                            –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—å –≤—Ä–µ–º–µ–Ω–∏
                        </h2>
                        <div class="modes-grid">
                            <div class="mode-card" data-time="1+0">
                                <div class="mode-time">1+0</div>
                                <div class="mode-label">Bullet</div>
                            </div>
                            <div class="mode-card" data-time="2+1">
                                <div class="mode-time">2+1</div>
                                <div class="mode-label">Bullet</div>
                            </div>
                            <div class="mode-card" data-time="3+0">
                                <div class="mode-time">3+0</div>
                                <div class="mode-label">Blitz</div>
                            </div>
                            <div class="mode-card" data-time="3+2">
                                <div class="mode-time">3+2</div>
                                <div class="mode-label">Blitz</div>
                            </div>
                            <div class="mode-card" data-time="5+0">
                                <div class="mode-time">5+0</div>
                                <div class="mode-label">Blitz</div>
                            </div>
                            <div class="mode-card" data-time="5+3">
                                <div class="mode-time">5+3</div>
                                <div class="mode-label">Blitz</div>
                            </div>
                            <div class="mode-card" data-time="10+0">
                                <div class="mode-time">10+0</div>
                                <div class="mode-label">Rapid</div>
                            </div>
                            <div class="mode-card" data-time="10+5">
                                <div class="mode-time">10+5</div>
                                <div class="mode-label">Rapid</div>
                            </div>
                            <div class="mode-card" data-time="15+10">
                                <div class="mode-time">15+10</div>
                                <div class="mode-label">Rapid</div>
                            </div>
                            <div class="mode-card" data-time="30+0">
                                <div class="mode-time">30+0</div>
                                <div class="mode-label">Classical</div>
                            </div>
                            <div class="mode-card" data-time="30+20">
                                <div class="mode-time">30+20</div>
                                <div class="mode-label">Classical</div>
                            </div>
                            <div class="mode-card" id="customGameBtn">
                                <div class="mode-time">‚öôÔ∏è</div>
                                <div class="mode-label">–°–≤–æ—è –∏–≥—Ä–∞</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LOBBY TAB -->
            <div class="tab-content" id="lobby-tab">
                <div class="content-grid">
                    <div class="game-modes">
                        <h2 class="section-title">
                            <i class="fas fa-door-open"></i>
                            –ó–∞–ª –æ–∂–∏–¥–∞–Ω–∏—è
                        </h2>
                        <div class="waiting-room">
                            <div class="waiting-item">
                                <div class="waiting-info">
                                    <div class="waiting-player">üèÜ GrandMaster2024</div>
                                    <div class="waiting-time">5+0 ‚Ä¢ –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è ‚Ä¢ 2450 ELO</div>
                                </div>
                                <button class="btn-join">–ü—Ä–∏–Ω—è—Ç—å</button>
                            </div>
                            <div class="waiting-item">
                                <div class="waiting-info">
                                    <div class="waiting-player">‚ôüÔ∏è ChessLover99</div>
                                    <div class="waiting-time">10+5 ‚Ä¢ –¢–æ–≤–∞—Ä–∏—â–µ—Å–∫–∞—è ‚Ä¢ 2100 ELO</div>
                                </div>
                                <button class="btn-join">–ü—Ä–∏–Ω—è—Ç—å</button>
                            </div>
                            <div class="waiting-item">
                                <div class="waiting-info">
                                    <div class="waiting-player">‚ö° StrategicKing</div>
                                    <div class="waiting-time">3+2 ‚Ä¢ –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è ‚Ä¢ 1980 ELO</div>
                                </div>
                                <button class="btn-join">–ü—Ä–∏–Ω—è—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TV TAB -->
            <div class="tab-content" id="tv-tab">
                <div class="content-grid">
                    <div class="game-modes">
                        <h2 class="section-title">
                            <i class="fas fa-broadcast-tower"></i>
                            –ñ–∏–≤—ã–µ –ø–∞—Ä—Ç–∏–∏
                        </h2>
                        <div class="tv-games">
                            <div class="tv-game">
                                <div class="tv-live-badge">
                                    <div class="live-dot"></div>
                                    LIVE
                                </div>
                                <div class="tv-players">
                                    <div class="tv-player">‚ö™ GrandMaster2024 (2450)</div>
                                    <div class="tv-player">‚ö´ ChessKing777 (2380)</div>
                                </div>
                                <div class="tv-time">5+0 Blitz ‚Ä¢ –•–æ–¥ 18</div>
                            </div>
                            <div class="tv-game">
                                <div class="tv-live-badge">
                                    <div class="live-dot"></div>
                                    LIVE
                                </div>
                                <div class="tv-players">
                                    <div class="tv-player">‚ö™ StrategicMind (2200)</div>
                                    <div class="tv-player">‚ö´ TacticalGenius (2290)</div>
                                </div>
                                <div class="tv-time">10+5 Rapid ‚Ä¢ –•–æ–¥ 12</div>
                            </div>
                            <div class="tv-game">
                                <div class="tv-live-badge">
                                    <div class="live-dot"></div>
                                    LIVE
                                </div>
                                <div class="tv-players">
                                    <div class="tv-player">‚ö™ RookMaster (1980)</div>
                                    <div class="tv-player">‚ö´ BishopLover (2050)</div>
                                </div>
                                <div class="tv-time">3+2 Blitz ‚Ä¢ –•–æ–¥ 25</div>
                            </div>
                            <div class="tv-game">
                                <div class="tv-live-badge">
                                    <div class="live-dot"></div>
                                    LIVE
                                </div>
                                <div class="tv-players">
                                    <div class="tv-player">‚ö™ KnightRider (2100)</div>
                                    <div class="tv-player">‚ö´ QueenSlayer (2150)</div>
                                </div>
                                <div class="tv-time">15+10 Rapid ‚Ä¢ –•–æ–¥ 8</div>
                            </div>
                        </div>
                    </div>

                    <div class="sidebar">
                        <div class="card">
                            <h3 class="card-title">
                                <i class="fas fa-info-circle"></i>
                                –û —Ä–µ–∂–∏–º–µ TV
                            </h3>
                            <p class="sidebar-description">
                                –°–º–æ—Ç—Ä–∏—Ç–µ –ø–∞—Ä—Ç–∏–∏ —Å–∏–ª—å–Ω–µ–π—à–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. 
                                –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±—É—é –ø–∞—Ä—Ç–∏—é, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- CUSTOM GAME MODAL -->
    <div class="modal-overlay" id="customGameModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-cog"></i>
                    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã
                </h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>

            <form id="customGameForm">
                <div class="slider-group">
                    <div class="slider-label">
                        <span class="slider-label-text">–ú–∏–Ω—É—Ç –Ω–∞ –ø–∞—Ä—Ç–∏—é</span>
                        <span class="slider-value" id="minutesValue">5</span>
                    </div>
                    <input type="range" class="slider" id="minutesSlider" min="1" max="60" value="5" step="1">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span class="slider-label-text">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ö–æ–¥</span>
                        <span class="slider-value" id="incrementValue">0</span>
                    </div>
                    <input type="range" class="slider" id="incrementSlider" min="0" max="30" value="0" step="1">
                </div>

                <div class="form-group">
                    <label class="form-label">–†–µ–∂–∏–º –∏–≥—Ä—ã</label>
                    <div class="game-type-toggle">
                        <button type="button" class="type-option" data-type="casual">–¢–æ–≤–∞—Ä–∏—â–µ—Å–∫–∞—è</button>
                        <button type="button" class="type-option active" data-type="rated">–†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è</button>
                    </div>
                </div>

                <button type="submit" class="btn-create">
                    <i class="fas fa-search"></i>
                    –°–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –∏–≥—Ä—É
                </button>
            </form>
        </div>
    </div>

    <!-- PLAY WITH FRIEND MODAL -->
    <div class="modal-overlay" id="friendGameModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-user-friends"></i>
                    –ò–≥—Ä–∞ —Å –¥—Ä—É–≥–æ–º
                </h2>
                <button class="modal-close" id="closeFriendModal">&times;</button>
            </div>

            <div id="friendSetupScreen">
                <form id="friendGameForm">
                    <div class="slider-group">
                        <div class="slider-label">
                            <span class="slider-label-text">–ú–∏–Ω—É—Ç –Ω–∞ –ø–∞—Ä—Ç–∏—é</span>
                            <span class="slider-value" id="friendMinutesValue">5</span>
                        </div>
                        <input type="range" class="slider" id="friendMinutesSlider" min="1" max="60" value="5" step="1">
                    </div>

                    <div class="slider-group">
                        <div class="slider-label">
                            <span class="slider-label-text">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ö–æ–¥</span>
                            <span class="slider-value" id="friendIncrementValue">0</span>
                        </div>
                        <input type="range" class="slider" id="friendIncrementSlider" min="0" max="30" value="0" step="1">
                    </div>

                    <div class="form-group">
                        <label class="form-label">–†–µ–∂–∏–º –∏–≥—Ä—ã</label>
                        <div class="game-type-toggle">
                            <button type="button" class="type-option active" data-type="casual">–¢–æ–≤–∞—Ä–∏—â–µ—Å–∫–∞—è</button>
                            <button type="button" class="type-option" data-type="rated">–†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è</button>
                        </div>
                    </div>

                    <button type="submit" class="btn-friend">
                        <i class="fas fa-link"></i>
                        –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
                    </button>
                </form>
            </div>

            <div id="friendShareScreen" class="share-screen">
                <div class="game-info-banner">
                    <div class="game-info-icon">üéØ</div>
                    <div class="game-info-title" id="shareGameTitle">–ü—É–ª—è 1+0</div>
                    <div class="game-info-details" id="shareGameType">–¢–æ–≤–∞—Ä–∏—â–µ—Å–∫–∞—è –ø–∞—Ä—Ç–∏—è</div>
                </div>

                <div class="share-instruction">
                    –ß—Ç–æ–±—ã –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É —ç—Ç—É —Å—Å—ã–ª–∫—É
                </div>

                <div class="link-container">
                    <input type="text" class="link-input" id="shareLink" value="https://powerchess.org/challenge/abc123xyz" readonly>
                    <button class="btn-copy" id="copyLinkBtn">
                        <i class="fas fa-copy"></i>
                        –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                </div>

                <div class="qr-container">
                    <div class="qr-title">–ò–ª–∏ –ø–æ–∑–≤–æ–ª—å—Ç–µ –≤–∞—à–µ–º—É —Å–æ–ø–µ—Ä–Ω–∏–∫—É –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç QR-–∫–æ–¥</div>
                    <div class="qr-code">
                        <i class="fas fa-qrcode"></i>
                    </div>
                </div>

                <div class="waiting-opponent">
                    <div class="waiting-text">–û–∂–∏–¥–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞</div>
                    <div class="waiting-dots">‚óè‚óè‚óè</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Common Auth Script (must load first) -->
    <script src="/scripts/auth.js"></script>
    <!-- Games Page Script -->
    <script src="/scripts/games.js"></script>
    <!-- Initialize event handlers -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Theme toggle button - will be handled by games.js or auth.js
        // No need to duplicate handler here
        
        // Mobile menu button
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        if (mobileMenuBtn) {
          mobileMenuBtn.addEventListener('click', function() {
            if (typeof window.toggleMobileMenu === 'function') {
              window.toggleMobileMenu();
            }
          });
        }
        
        // Mobile menu links
        document.querySelectorAll('.mobile-nav-link').forEach(function(link) {
          link.addEventListener('click', function() {
            if (typeof window.closeMobileMenu === 'function') {
              window.closeMobileMenu();
            }
          });
        });
      });
    </script>
</body>
</html>
